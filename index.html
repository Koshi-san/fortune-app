<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÂøÉ„ÅÆ„ÅäÂÆà„Çä - ÊØéÊó•„ÅÆÈÅãÂã¢„Ç¢„Éó„É™</title>
    
    <!-- SEO„ÉªSNS„Ç∑„Çß„Ç¢ÂØæÁ≠ñ -->
    <meta name="description" content="ÂõõÊü±Êé®ÂëΩ„ÉªÊòìÁµå„ÉªÈô∞ÈôΩ‰∫îË°å„ÅßÊØéÊó•„ÅÆÈÅãÂã¢„ÇíÂç†„ÅÜ„ÄåÂøÉ„ÅÆ„ÅäÂÆà„Çä„Äç„ÄÇÂÆåÂÖ®ÁÑ°Êñô„ÅßÊú¨Ê†ºÁöÑ„Å™Âç†„ÅÑ„Çí„ÅäÊ•Ω„Åó„Åø„Åè„Å†„Åï„ÅÑ„ÄÇ">
    <meta name="keywords" content="Âç†„ÅÑ,ÈÅãÂã¢,ÂõõÊü±Êé®ÂëΩ,ÊòìÁµå,Èô∞ÈôΩ‰∫îË°å,‰ªäÊó•„ÅÆÈÅãÂã¢,ÁÑ°ÊñôÂç†„ÅÑ">
    <meta property="og:title" content="ÂøÉ„ÅÆ„ÅäÂÆà„Çä - ÊØéÊó•„ÅÆÈÅãÂã¢„Ç¢„Éó„É™">
    <meta property="og:description" content="ÂõõÊü±Êé®ÂëΩ„ÉªÊòìÁµå„ÉªÈô∞ÈôΩ‰∫îË°å„Åß‰ªäÊó•„ÅÆÈÅãÂã¢„ÇíÂç†„ÅÜÊú¨Ê†º„Ç¢„Éó„É™„ÄÇÂÆåÂÖ®ÁÑ°Êñô„Åß„ÅîÂà©Áî®„ÅÑ„Åü„Å†„Åë„Åæ„Åô„ÄÇ">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://your-username.github.io/fortune-app/">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="ÂøÉ„ÅÆ„ÅäÂÆà„Çä - ÊØéÊó•„ÅÆÈÅãÂã¢„Ç¢„Éó„É™">
    <meta name="twitter:description" content="ÂõõÊü±Êé®ÂëΩ„ÉªÊòìÁµå„ÉªÈô∞ÈôΩ‰∫îË°å„Åß‰ªäÊó•„ÅÆÈÅãÂã¢„ÇíÂç†„ÅÜÊú¨Ê†º„Ç¢„Éó„É™">
    
    <!-- „Éï„Ç°„Éì„Ç≥„É≥ -->
    <link rel="icon" href="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üîÆ</text></svg>">
    
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-V4LFPM284E"></script>
    <script>
        // GA_MEASUREMENT_ID „ÇíÂÆüÈöõ„ÅÆÊ∏¨ÂÆöID„Å´ÁΩÆ„ÅçÊèõ„Åà„Å¶„Åè„Å†„Åï„ÅÑ
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-V4LFPM284E');
        
        // „Ç´„Çπ„Çø„É†„Ç§„Éô„É≥„ÉàÈÄÅ‰ø°Èñ¢Êï∞
        function trackEvent(action, category = 'User Interaction') {
            if (typeof gtag !== 'undefined') {
                gtag('event', action, {
                    'event_category': category,
                    'event_label': 'Fortune App'
                });
            }
        }
    </script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Hiragino Sans', 'Hiragino Kaku Gothic ProN', 'Noto Sans JP', sans-serif;
            background: linear-gradient(135deg, #38bdf8, #93c5fd, #fde047);
            min-height: 100vh;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1024px;
            margin: 0 auto;
            padding: 1rem;
        }
        
        .form-container {
            max-width: 28rem;
            margin: 0 auto;
        }
        
        .card {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(12px);
            border-radius: 1rem;
            padding: 1.5rem;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            border: 1px solid rgba(255, 255, 255, 0.3);
            margin-bottom: 1.5rem;
        }
        
        .text-center {
            text-align: center;
        }
        
        .text-white {
            color: white;
        }
        
        .text-blue-800 {
            color: #1e40af;
        }
        
        .text-blue-700 {
            color: #1d4ed8;
        }
        
        .text-yellow-400 {
            color: #facc15;
        }
        
        .text-amber-600 {
            color: #d97706;
        }
        
        .text-pink-400 {
            color: #f472b6;
        }
        
        .text-green-400 {
            color: #4ade80;
        }
        
        .text-red-400 {
            color: #f87171;
        }
        
        .text-gray-200 {
            color: #e5e7eb;
        }
        
        .text-gray-300 {
            color: #d1d5db;
        }
        
        .text-gray-600 {
            color: #4b5563;
        }
        
        .text-blue-300 {
            color: #93c5fd;
        }
        
        .text-blue-400 {
            color: #60a5fa;
        }
        
        h1 {
            font-size: 1.875rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }
        
        h2 {
            font-size: 1.25rem;
            font-weight: bold;
            margin-bottom: 1rem;
        }
        
        h3 {
            font-weight: bold;
            margin-bottom: 0.25rem;
        }
        
        .input-group {
            margin-bottom: 1.5rem;
        }
        
        label {
            display: block;
            color: white;
            font-size: 0.875rem;
            font-weight: 500;
            margin-bottom: 0.5rem;
        }
        
        input, select {
            width: 100%;
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            font-size: 1rem;
        }
        
        input::placeholder {
            color: #4b5563;
        }
        
        input:focus, select:focus {
            outline: none;
            ring: 2px solid #facc15;
        }
        
        select option {
            color: #1f2937;
            background-color: white;
        }
        
        .btn {
            width: 100%;
            background: linear-gradient(to right, #facc15, #f97316);
            color: white;
            font-weight: bold;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            border: none;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        
        .btn:hover {
            background: linear-gradient(to right, #eab308, #ea580c);
            transform: scale(1.05);
        }
        
        .btn-reset {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            border: 1px solid rgba(255, 255, 255, 0.3);
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn-share {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            border: 1px solid rgba(255, 255, 255, 0.3);
            cursor: pointer;
            transition: all 0.3s;
            margin: 0 0.25rem;
            text-decoration: none;
            display: inline-block;
            font-size: 0.875rem;
        }
        
        .btn-share:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }
        
        .btn-reset {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            border: 1px solid rgba(255, 255, 255, 0.3);
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn-reset:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        
        .share-container {
            margin: 1rem 0;
        }
        
        .grid {
            display: grid;
            gap: 1rem;
        }
        
        .grid-2 {
            grid-template-columns: repeat(2, 1fr);
        }
        
        .grid-3 {
            grid-template-columns: repeat(3, 1fr);
        }
        
        @media (max-width: 768px) {
            .grid-2, .grid-3 {
                grid-template-columns: 1fr;
            }
        }
        
        .stars {
            display: flex;
            justify-content: center;
            margin-bottom: 0.75rem;
        }
        
        .star {
            width: 1.25rem;
            height: 1.25rem;
            margin: 0 0.125rem;
        }
        
        .star-filled {
            color: #facc15;
            fill: currentColor;
        }
        
        .star-empty {
            color: #4b5563;
        }
        
        .element-badge {
            display: inline-block;
            padding: 0.5rem 1rem;
            border-radius: 9999px;
            background: rgba(255, 255, 255, 0.2);
            margin-bottom: 0.5rem;
        }
        
        .lucky-item {
            margin-bottom: 1.5rem;
        }
        
        .lucky-icon {
            width: 3rem;
            height: 3rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 0.5rem;
        }
        
        .lucky-icon-yellow {
            background-color: #facc15;
        }
        
        .lucky-icon-blue {
            background-color: #60a5fa;
        }
        
        .lucky-icon-purple {
            background-color: #a78bfa;
        }
        
        .icon-white {
            color: white;
        }
        
        .loading {
            text-align: center;
            padding: 2rem;
        }
        
        .loading-icon {
            width: 4rem;
            height: 4rem;
            color: #facc15;
            margin: 0 auto 2rem;
            animation: pulse 2s infinite;
        }
        
        .loading-dots {
            display: flex;
            justify-content: center;
            gap: 0.25rem;
        }
        
        .loading-dot {
            width: 0.75rem;
            height: 0.75rem;
            background-color: #facc15;
            border-radius: 50%;
            animation: bounce 1s infinite;
        }
        
        .loading-dot:nth-child(2) {
            animation-delay: 0.2s;
        }
        
        .loading-dot:nth-child(3) {
            animation-delay: 0.4s;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        @keyframes bounce {
            0%, 20%, 53%, 80%, 100% { transform: translate3d(0,0,0); }
            40%, 43% { transform: translate3d(0,-30px,0); }
            70% { transform: translate3d(0,-15px,0); }
            90% { transform: translate3d(0,-4px,0); }
        }
        
        .mb-2 { margin-bottom: 0.5rem; }
        .mb-4 { margin-bottom: 1rem; }
        .mb-6 { margin-bottom: 1.5rem; }
        .mb-8 { margin-bottom: 2rem; }
        .pt-4 { padding-top: 1rem; }
        .pt-8 { padding-top: 2rem; }
        .flex { display: flex; }
        .items-center { align-items: center; }
        .mr-2 { margin-right: 0.5rem; }
        .text-sm { font-size: 0.875rem; }
        .text-lg { font-size: 1.125rem; }
        .text-xl { font-size: 1.25rem; }
        .max-w-md { max-width: 28rem; }
        .mx-auto { margin-left: auto; margin-right: auto; }
        .leading-relaxed { line-height: 1.625; }
        
        .footer {
            margin-top: 2rem;
            padding: 1rem;
            text-align: center;
            font-size: 0.75rem;
            color: rgba(255, 255, 255, 0.6);
            line-height: 1.4;
        }
        
        .justify-center { justify-content: center; }
        .flex-wrap { flex-wrap: wrap; }
    </style>
</head>
<body>
    <div id="app"></div>

    <script>
        // „Ç∞„É≠„Éº„Éê„É´Áä∂ÊÖã
        let currentState = {
            user: null,
            fortune: null,
            showAnimation: false,
            formData: {
                name: '',
                birthDate: '',
                gender: ''
            }
        };

        // „Éá„Éº„ÇøÂÆöÁæ©
        const tenStems = ['Áî≤', '‰πô', '‰∏ô', '‰∏Å', 'Êàä', 'Â∑±', 'Â∫ö', 'Ëæõ', 'Â£¨', 'Áô∏'];
        const twelveBranches = ['Â≠ê', '‰∏ë', 'ÂØÖ', 'ÂçØ', 'Ëæ∞', 'Â∑≥', 'Âçà', 'Êú™', 'Áî≥', 'ÈÖâ', 'Êàå', '‰∫•'];
        const fiveElements = ['Êú®', 'ÁÅ´', 'Âúü', 'Èáë', 'Ê∞¥'];
        const elementColors = {
            'Êú®': 'text-green-400',
            'ÁÅ´': 'text-red-400', 
            'Âúü': 'text-amber-600',
            'Èáë': 'text-gray-200',
            'Ê∞¥': 'text-blue-300'
        };

        const hexagrams = [
            { 
                name: '‰πæ', 
                meaning: 'ÂâµÈÄ†', 
                advice: [
                    'Á©çÊ•µÁöÑ„Å´Ë°åÂãï„Åô„Çã„Åì„Å®„ÅßÈÅì„ÅåÈñã„Åë„Çã',
                    'Ëá™‰ø°„ÇíÊåÅ„Å£„Å¶Ê±∫Êñ≠„Çí‰∏ã„ÅôÊôÇ„Åß„Åô',
                    '„É™„Éº„ÉÄ„Éº„Ç∑„ÉÉ„Éó„ÇíÁô∫ÊèÆ„Åô„ÇãÁµ∂Â•Ω„ÅÆÊ©ü‰ºö',
                    'ÂâµÈÄ†ÊÄß„ÇíÂ≠òÂàÜ„Å´Áô∫ÊèÆ„Åó„Å¶„Åè„Å†„Åï„ÅÑ',
                    'Âº∑„ÅÑÊÑèÂøó„ÅßÁõÆÊ®ô„Å´Âêë„Åã„ÅÑ„Åæ„Åó„Çá„ÅÜ'
                ]
            },
            { 
                name: 'Âù§', 
                meaning: 'ÂèóÂÆπ', 
                advice: [
                    'Âë®„Çä„ÅÆÂ£∞„Å´ËÄ≥„ÇíÂÇæ„Åë„ÄÅÊüîËªüÊÄß„ÇíÂ§ßÂàá„Å´',
                    'Âèó„ÅëÂÖ•„Çå„ÇãÂøÉ„ÅåÊñ∞„Åü„Å™ÂèØËÉΩÊÄß„ÇíÂºï„ÅçÂØÑ„Åõ„Åæ„Åô',
                    'ÂçîË™øÊÄß„ÇíÊ¥ª„Åã„Åó„Å¶„ÄÅ„Åø„Çì„Å™„ÅßÂäõ„ÇíÂêà„Çè„Åõ„Å¶',
                    'Ë¨ôËôö„Å™ÂßøÂã¢„ÅåÂë®Âõ≤„Åã„Çâ„ÅÆ‰ø°È†º„ÇíÂæó„ÇãÈçµ',
                    'ÂåÖÂÆπÂäõ„ÇíÊåÅ„Å£„Å¶‰∫∫„Å®Êé•„Åó„Åæ„Åó„Çá„ÅÜ'
                ]
            },
            { 
                name: 'Â±Ø', 
                meaning: 'Âõ∞Èõ£', 
                advice: [
                    'Â∞è„Åï„Å™‰∏ÄÊ≠©„Åã„ÇâÂßã„ÇÅ„Çã„Åì„Å®„ÅåÂ§ßÂàá',
                    'Âõ∞Èõ£„ÅØÊàêÈï∑„ÅÆ„ÉÅ„É£„É≥„Çπ„Åß„Åô',
                    'Âü∫Á§é„Çí„Åó„Å£„Åã„ÇäÂõ∫„ÇÅ„Åæ„Åó„Çá„ÅÜ',
                    '‰ª≤Èñì„ÅÆÂä©„Åë„ÇíÂÄü„Çä„Çã„Åì„Å®„ÅßÈÅì„ÅåÈñã„Åë„Åæ„Åô',
                    'Â∏åÊúõ„ÇíÊåÅ„Å°Á∂ö„Åë„Çã„Åì„Å®„ÅåÈáçË¶Å'
                ]
            },
            { 
                name: 'Ëíô', 
                meaning: 'ÂïìÁô∫', 
                advice: [
                    'Êñ∞„Åó„ÅÑÂ≠¶„Å≥„Åå„ÅÇ„Å™„Åü„ÇíÊàêÈï∑„Åï„Åõ„Çã',
                    'Á¥†Áõ¥„Å™ÂøÉ„ÅßÊïô„Åà„ÇíÂèó„Åë„Åæ„Åó„Çá„ÅÜ',
                    'Áü•Ë≠ò„ÇíÊ∑±„ÇÅ„Çã„Åì„Å®„ÅßÈÅì„ÅåÈñã„Åã„Çå„Åæ„Åô',
                    'Ë¨ôËôö„Å´Â≠¶„Å∂ÂßøÂã¢„ÇíÂ§ßÂàá„Å´',
                    'ÂàùÂøÉËÄÖ„ÅÆÂøÉ„ÇíÂøò„Çå„Åö„Å´'
                ]
            },
            { 
                name: 'ÈúÄ', 
                meaning: 'ÂæÖÊ©ü', 
                advice: [
                    '„Çø„Ç§„Éü„É≥„Ç∞„ÇíË¶ãÊ•µ„ÇÅ„Çã„Åì„Å®„ÅåÊàêÂäü„ÅÆÈçµ',
                    'ÁÑ¶„Çâ„Åö„ÄÅ„Åò„Å£„Åè„Çä„Å®Ê∫ñÂÇô„ÇíÊï¥„Åà„Å¶',
                    'ÂæÖ„Å§„Åì„Å®„ÅßÂäõ„ÇíËìÑ„Åà„Åæ„Åó„Çá„ÅÜ',
                    'Â§©„ÅÆÊôÇ„Çí‰ø°„Åò„Å¶Ëá™ÁÑ∂„ÅÆÊµÅ„Çå„Å´Ë∫´„Çí‰ªª„Åõ„Å¶',
                    'ÂÖÖÈõªÊúüÈñì„Å®„Åó„Å¶‰ªä„ÇíÊ¥ªÁî®„Åó„Åæ„Åó„Çá„ÅÜ'
                ]
            },
            { 
                name: 'Ë®ü', 
                meaning: '‰∫â„ÅÑ', 
                advice: [
                    'ÂØæÁ´ã„Çà„Çä„ÇÇË™øÂíå„ÇíÈÅ∏„Å∂„Åì„Å®„ÅßËß£Ê±∫„Åô„Çã',
                    'Ë©±„ÅóÂêà„ÅÑ„ÇíÈÄö„Åò„Å¶ÁêÜËß£„ÇíÊ∑±„ÇÅ„Åæ„Åó„Çá„ÅÜ',
                    '‰∫â„ÅÑ„ÇíÈÅø„Åë„ÄÅÂπ≥ÂíåÁöÑ„Å™Ëß£Ê±∫Á≠ñ„ÇíÊ®°Á¥¢„Åó„Å¶',
                    'Áõ∏Êâã„ÅÆÁ´ãÂ†¥„Å´Á´ã„Å£„Å¶ËÄÉ„Åà„Å¶„Åø„Å¶',
                    'Â¶•ÂçîÁÇπ„ÇíË¶ã„Å§„Åë„Çã„Åì„Å®„ÅåÂ§ßÂàá'
                ]
            },
            { 
                name: 'Â∏´', 
                meaning: 'Áµ±Áéá', 
                advice: [
                    '„É™„Éº„ÉÄ„Éº„Ç∑„ÉÉ„Éó„ÇíÁô∫ÊèÆ„Åô„ÇãÊôÇ',
                    'Ë≤¨‰ªªÊÑü„ÇíÊåÅ„Å£„Å¶„ÉÅ„Éº„É†„ÇíÂ∞é„ÅÑ„Å¶',
                    'Ë¶èÂæã„Å®Áß©Â∫è„Çí‰øù„Å°„Å™„Åå„ÇâÈÄ≤„Åø„Åæ„Åó„Çá„ÅÜ',
                    'ÈÉ®‰∏ã„ÇÑ‰ª≤Èñì„Å∏„ÅÆÈÖçÊÖÆ„ÇíÂøò„Çå„Åö„Å´',
                    'Áµ±ÁéáÂäõ„ÅßÁµÑÁπî„ÅÆÂäõ„ÇíÂºï„ÅçÂá∫„Åó„Å¶'
                ]
            },
            { 
                name: 'ÊØî', 
                meaning: 'Ë¶™Âíå', 
                advice: [
                    '‰∫∫„Å®„ÅÆ„Å§„Å™„Åå„Çä„ÅåÂπ∏ÈÅã„ÇíÈÅã„Çì„Åß„Åè„Çã',
                    'ÂèãÊÉÖ„ÇíÂ§ßÂàá„Å´„Åó„ÄÅÊîØ„ÅàÂêà„ÅÑ„Åæ„Åó„Çá„ÅÜ',
                    'ÂçîÂäõËÄÖ„Å®„ÅÆÁµÜ„ÇíÊ∑±„ÇÅ„Å¶',
                    'Ë¶™„Åó„Åø„ÇÑ„Åô„Åï„Åå„ÅÇ„Å™„Åü„ÅÆÈ≠ÖÂäõ',
                    '‰ª≤Èñì„Å®„ÅÆÁµêÊùü„ÅåÂäõ„ÇíÁô∫ÊèÆ„Åó„Åæ„Åô'
                ]
            }
        ];

        const luckyColors = ['„Ç¥„Éº„É´„Éâ(ÈáëËâ≤)', '„Ç∑„É´„Éê„Éº(ÈäÄËâ≤)', '„Éá„Ç£„Éº„Éó„Éñ„É´„Éº(Ê∑±ÈùíËâ≤)', '„Ç®„É°„É©„É´„Éâ„Ç∞„É™„Éº„É≥(Á∑ëËâ≤)', '„É´„Éì„Éº„É¨„ÉÉ„Éâ(Ëµ§Ëâ≤)', '„Ç¢„É°„Ç∏„Çπ„Éà(Á¥´Ëâ≤)', '„É≠„Éº„Ç∫„ÇØ„Ç©„Éº„ÉÑ(Ê∑°Ê°ÉËâ≤)', '„Çµ„Éï„Ç°„Ç§„Ç¢(ÈùíËâ≤)', '„Éö„É™„Éâ„ÉÉ„Éà(ÈªÑÁ∑ëËâ≤)', '„Ç™„Éã„Ç≠„Çπ(ÈªíËâ≤)', '„É†„Éº„É≥„Çπ„Éà„Éº„É≥(‰π≥ÁôΩËâ≤)', '„Éà„Éë„Éº„Ç∫(ÈªÑËâ≤)'];
        const directions = ['Êù±', 'Ë•ø', 'Âçó', 'Âåó', 'Êù±Âçó', 'ÂçóË•ø', 'ÂåóÊù±', 'ÂåóË•ø'];

        // „É¶„Éº„ÉÜ„Ç£„É™„ÉÜ„Ç£Èñ¢Êï∞
        function getElementDescription(element) {
            const descriptions = {
                'Êú®': [
                    'ÊàêÈï∑„ÉªÁô∫Â±ï„ÉªÂâµÈÄ†Âäõ„ÇíÂè∏„Çã„ÄÇÊñ∞„Åó„ÅÑ„Åì„Å®„ÇíÂßã„ÇÅ„Çã„ÅÆ„Å´ÈÅ©„Åó„Åü„Ç®„Éç„É´„ÇÆ„Éº',
                    'Ëã•Ëëâ„ÅÆ„Çà„ÅÜ„Å´‰º∏„Å≥„ÇÑ„Åã„Å™Ê∞ó„ÇíÊåÅ„Å§Êó•„ÄÇÂèØËÉΩÊÄß„Çí‰ø°„Åò„Å¶Ë°åÂãï„ÇíËµ∑„Åì„Åó„Åæ„Åó„Çá„ÅÜ',
                    'ÂâµÈÄ†ÊÄß„Å®ÊüîËªüÊÄß„Å´Ê∫Ä„Å°„Åü‰∏ÄÊó•„ÄÇ„Ç¢„Ç§„Éá„Ç¢„ÇíÂΩ¢„Å´„Åô„ÇãÁµ∂Â•Ω„ÅÆ„Çø„Ç§„Éü„É≥„Ç∞',
                    'Êò•„ÅÆÊÅØÂêπ„ÅÆ„Çà„ÅÜ„Å™ÁîüÂëΩÂäõÊ∫¢„Çå„ÇãÊó•„ÄÇÊñ∞„Åü„Å™ÊåëÊà¶„Å´Âêë„Åã„ÅÜÂãáÊ∞ó„ÅåÊπß„ÅÑ„Å¶„Åç„Åæ„Åô',
                    'ÊàêÈï∑„Å∏„ÅÆÊÑèÊ¨≤„ÅåÈ´ò„Åæ„ÇãÊôÇ„ÄÇÂ≠¶„Å≥„Å®ÁµåÈ®ì„ÇíÁ©çÊ•µÁöÑ„Å´Âèñ„ÇäÂÖ•„Çå„Å¶„Åø„Å¶'
                ],
                'ÁÅ´': [
                    'ÊÉÖÁÜ±„ÉªÊ¥ªÂäõ„Éª„Ç≥„Éü„É•„Éã„Ç±„Éº„Ç∑„Éß„É≥„ÇíÂè∏„Çã„ÄÇ‰∫∫„Å®„ÅÆ„Å§„Å™„Åå„Çä„ÅåÈáçË¶Å„Å™Êó•',
                    'ÁáÉ„Åà„ÇãÁÇé„ÅÆ„Çà„ÅÜ„Å™ÁÜ±„ÅÑ„Ç®„Éç„É´„ÇÆ„Éº„Å´Ê∫Ä„Å°„Å¶„ÅÑ„Åæ„Åô„ÄÇÁ©çÊ•µÁöÑ„Å´Ë°åÂãï„Åó„Åæ„Åó„Çá„ÅÜ',
                    'Êòé„Çã„ÅèËºù„ÅèÂ§™ÈôΩ„ÅÆ„Éë„ÉØ„Éº„Åå„ÅÇ„Å™„Åü„ÇíÁÖß„Çâ„ÅôÊó•„ÄÇÂë®Âõ≤„ÇíÂÖÉÊ∞ó„Å•„Åë„Çâ„Çå„Åù„ÅÜ',
                    'ÊÉÖÁÜ±ÁöÑ„Å™Ê∞óÊåÅ„Å°„ÅåÊàêÂäü„Å∏„ÅÆÊââ„ÇíÈñã„Åç„Åæ„Åô„ÄÇÂøÉ„ÅÆÂ£∞„Å´Âæì„Å£„Å¶ÈÄ≤„Çì„Åß„Åè„Å†„Åï„ÅÑ',
                    'Ê¥ªÂäõ„Å®È≠ÖÂäõ„ÅåÊúÄÈ´òÊΩÆ„Å´„ÄÇ„É™„Éº„ÉÄ„Éº„Ç∑„ÉÉ„Éó„ÇíÁô∫ÊèÆ„Åô„ÇãÂ†¥Èù¢„ÅåË®™„Çå„Çã„Åã„ÇÇ'
                ],
                'Âúü': [
                    'ÂÆâÂÆö„Éª‰ø°È†º„ÉªÂåÖÂÆπÂäõ„ÇíÂè∏„Çã„ÄÇÂü∫Áõ§„ÇíÂõ∫„ÇÅ„ÄÅ‰∫∫„ÇíÊîØ„Åà„Çã„Åì„Å®„ÅßÈÅãÊ∞ó‰∏äÊòá',
                    'Â§ßÂú∞„ÅÆ„Çà„ÅÜ„Å´ÂÆâÂÆö„Åó„ÅüÂäõ„Å´ÊîØ„Åà„Çâ„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ„Åò„Å£„Åè„Çä„Å®Áâ©‰∫ã„ÇíÈÄ≤„ÇÅ„Å¶',
                    'ÊØç„Å™„ÇãÂ§ßÂú∞„ÅÆÂåÖÂÆπÂäõ„ÇíÊåÅ„Å§Êó•„ÄÇÂë®Âõ≤„Å∏„ÅÆÊÄù„ÅÑ„ÇÑ„Çä„ÅåÂπ∏ÈÅã„ÇíÂëº„Å≥Ëæº„Åø„Åæ„Åô',
                    'Â†ÖÂÆü„Åß‰ø°È†º„Åß„Åç„Çã„ÅÇ„Å™„Åü„ÅÆÈ≠ÖÂäõ„ÅåÂÖâ„ÇãÊôÇ„ÄÇÁùÄÂÆü„Å™Ê≠©„Åø„ÇíÂ§ßÂàá„Å´',
                    'Ë™øÂíå„Å®ÂÆâÂÆö„ÇíÈáçË¶ñ„Åô„Çã„Åì„Å®„Åß„ÄÅÂ§ß„Åç„Å™ÊàêÊûú„Å´„Å§„Å™„Åå„ÇãÊöóÁ§∫„Åå„ÅÇ„Çä„Åæ„Åô'
                ],
                'Èáë': [
                    'Ê±∫Êñ≠„ÉªÊÑèÂøó„ÉªÊµÑÂåñ„ÇíÂè∏„Çã„ÄÇÊï¥ÁêÜÊï¥È†ì„ÇÑË®àÁîªÁöÑ„Å™Ë°åÂãï„ÅåÂπ∏ÈÅã„ÇíÊãõ„Åè',
                    'ÈáëÂ±û„ÅÆ„Çà„ÅÜ„Å´Âº∑„ÅÑÊÑèÂøóÂäõ„ÇíÊåÅ„Å§Êó•„ÄÇËø∑„ÅÑ„ÇíÊñ≠„Å°Âàá„Å£„Å¶ÂâçÈÄ≤„Åó„Åæ„Åó„Çá„ÅÜ',
                    'Èã≠„ÅÑÊ¥ûÂØüÂäõ„Å®ÈõÜ‰∏≠Âäõ„ÅåÂÜ¥„Åà„ÇãÊôÇ„ÄÇÈáçË¶Å„Å™Âà§Êñ≠„Çí‰∏ã„Åô„ÅÆ„Å´ÊúÄÈÅ©„Åß„Åô',
                    'Á¥îÁ≤ã„ÅßÊæÑ„Çì„Å†ÂøÉÊåÅ„Å°„ÅåÈÅì„ÇíÈñã„Åç„Åæ„Åô„ÄÇ‰∏çË¶Å„Å™„ÇÇ„ÅÆ„ÇíÊâãÊîæ„Åô„Çø„Ç§„Éü„É≥„Ç∞',
                    'ÂìÅÊ†º„Å®ÁêÜÊÄß„ÇíÈáç„Çì„Åò„Çã„Åì„Å®„Åß„ÄÅÂë®Âõ≤„Åã„Çâ„ÅÆ‰ø°È†º„ÇíÂæó„Çâ„Çå„ÇãÊó•„Åß„Åô'
                ],
                'Ê∞¥': [
                    'Áü•ÊÅµ„ÉªÊüîËªüÊÄß„ÉªÁõ¥ÊÑü„ÇíÂè∏„Çã„ÄÇÊµÅ„Çå„Å´Ë∫´„Çí‰ªª„Åõ„ÄÅÂÜÖÈù¢„ÅÆÂ£∞„Å´Âæì„ÅÜÊó•',
                    'Ê∏Ö„Çâ„Åã„Å™Ê∞¥„ÅÆ„Çà„ÅÜ„Å´Á¥îÁ≤ã„Å™ÂøÉ„ÅßÈÅé„Åî„Åó„Åæ„Åó„Çá„ÅÜ„ÄÇÁõ¥ÊÑü„ÅåÂÜ¥„Åà„Å¶„ÅÑ„Åæ„Åô',
                    'ÊµÅ„Çå„ÇãÂ∑ù„ÅÆ„Çà„ÅÜ„Å™ÈÅ©ÂøúÂäõ„ÅåÊ¥ª„Åã„Åï„Çå„ÇãÊôÇ„ÄÇÂ§âÂåñ„ÇíÊÅê„Çå„ÅöÈÄ≤„Çì„Åß„Åè„Å†„Åï„ÅÑ',
                    'Ê∑±„ÅÑÊµ∑„ÅÆ„Çà„ÅÜ„Å™Âè°Êô∫„Åå„ÅÇ„Å™„Åü„ÅÆ‰∏≠„Å´Áú†„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇÁûëÊÉ≥ÁöÑ„Å™ÊôÇÈñì„ÇíÂ§ßÂàá„Å´',
                    'ÊÑüÂèóÊÄß„Å®ÂÖ±ÊÑüÂäõ„ÅåÈ´ò„Åæ„ÇãÊó•„ÄÇ‰∫∫„ÅÆÂøÉ„Å´ÂØÑ„ÇäÊ∑ª„ÅÜ„Åì„Å®„ÅßÁµÜ„ÅåÊ∑±„Åæ„Çä„Åæ„Åô'
                ]
            };
            const elementArray = descriptions[element] || [''];
            return elementArray[Math.floor(Math.random() * elementArray.length)];
        }

        function getColorItems(color) {
            const items = {
                '„Ç¥„Éº„É´„Éâ(ÈáëËâ≤)': ['„Ç¢„ÇØ„Çª„Çµ„É™„Éº', 'ÊñáÊàøÂÖ∑', '„ÉØ„É≥„Éù„Ç§„É≥„ÉàÂ∞èÁâ©', 'ÊôÇË®à', '„Éú„Éº„É´„Éö„É≥'],
                '„Ç∑„É´„Éê„Éº(ÈäÄËâ≤)': ['ÊôÇË®à', '„Ç≠„Éº„Éõ„É´„ÉÄ„Éº', 'Èù¥‰∏ã', '„Ç§„É§„É™„É≥„Ç∞', '„Éò„Ç¢„Éî„É≥'],
                '„Éá„Ç£„Éº„Éó„Éñ„É´„Éº(Ê∑±ÈùíËâ≤)': ['„Éè„É≥„Ç´„ÉÅ', '„Éû„Éï„É©„Éº', 'ÊâãÂ∏≥„Ç´„Éê„Éº', '„Éç„ÇØ„Çø„Ç§', '„Éê„ÉÉ„Ç∞'],
                '„Ç®„É°„É©„É´„Éâ„Ç∞„É™„Éº„É≥(Á∑ëËâ≤)': ['„Éû„Çπ„ÇØ', '„Éà„Éº„Éà„Éê„ÉÉ„Ç∞', '„Éò„Ç¢„Ç¢„ÇØ„Çª„Çµ„É™„Éº', 'Ê§çÁâ©', '„Éè„É≥„Éâ„Çø„Ç™„É´'],
                '„É´„Éì„Éº„É¨„ÉÉ„Éâ(Ëµ§Ëâ≤)': ['„É™„ÉÉ„Éó', '„Éç„Ç§„É´', '„Ç´„Éº„Éâ„Ç±„Éº„Çπ', '„Çπ„Ç´„Éº„Éï', 'Âè£Á¥Ö'],
                '„Ç¢„É°„Ç∏„Çπ„Éà(Á¥´Ëâ≤)': ['„Ç§„É§„É™„É≥„Ç∞', '„Éñ„É¨„Çπ„É¨„ÉÉ„Éà', '„Çπ„Éû„Éõ„Ç±„Éº„Çπ', '„Éë„Çπ„Ç±„Éº„Çπ', '„Éù„Éº„ÉÅ'],
                '„É≠„Éº„Ç∫„ÇØ„Ç©„Éº„ÉÑ(Ê∑°Ê°ÉËâ≤)': ['„Éò„Ç¢„Ç¥„É†', '„Éè„É≥„Éâ„ÇØ„É™„Éº„É†', '„Éñ„É©„Ç¶„Çπ', '„Çπ„Éà„Éº„É´', '„ÉÅ„Éº„ÇØ'],
                '„Çµ„Éï„Ç°„Ç§„Ç¢(ÈùíËâ≤)': ['„Éö„É≥', '„Éé„Éº„Éà', '„Éô„É´„Éà', '„ÇΩ„ÉÉ„ÇØ„Çπ', '„ÉØ„É≥„Éî„Éº„Çπ'],
                '„Éö„É™„Éâ„ÉÉ„Éà(ÈªÑÁ∑ëËâ≤)': ['„Ç¢„ÇØ„Çª„Çµ„É™„Éº', '‰∏ãÁùÄ', '„Çø„Ç™„É´', '„Ç®„Ç≥„Éê„ÉÉ„Ç∞', '„É™„Éú„É≥'],
                '„Ç™„Éã„Ç≠„Çπ(ÈªíËâ≤)': ['„Ç∑„É•„Éº„Ç∫', '„Éô„É´„Éà', 'Ë≤°Â∏É', '„Çπ„Éº„ÉÑ', '„Ç¢„Ç§„É©„Ç§„Éä„Éº'],
                '„É†„Éº„É≥„Çπ„Éà„Éº„É≥(‰π≥ÁôΩËâ≤)': ['„Éë„Éº„É´', '„Éñ„É©„Ç¶„Çπ', '„Éè„É≥„Ç´„ÉÅ', '„Éì„Éº„Ç∫', '„Çπ„Ç´„Éº„Éà'],
                '„Éà„Éë„Éº„Ç∫(ÈªÑËâ≤)': ['„Éç„ÉÉ„ÇØ„É¨„Çπ', '„Ç∑„É£„ÉÑ', '„Éû„Éã„Ç≠„É•„Ç¢', '„Éï„É©„ÉØ„Éº', '„ÉÅ„É£„Éº„É†']
            };
            const colorItems = items[color] || ['Â∞èÁâ©'];
            return colorItems[Math.floor(Math.random() * colorItems.length)];
        }

        function getHexagramDetail(hexagram) {
            const details = {
                '‰πæ': [
                    'Â§©„ÅÆÂç¶„ÄÇÂº∑„ÅÑ„É™„Éº„ÉÄ„Éº„Ç∑„ÉÉ„Éó„Å®ÂâµÈÄ†Âäõ„ÅßÊñ∞„Åó„ÅÑÈÅì„ÇíÂàá„ÇäÈñã„Åè',
                    'ÁÑ°Èôê„ÅÆÂèØËÉΩÊÄß„ÇíÁßò„ÇÅ„ÅüÁ¥îÁ≤ã„Å™„Ç®„Éç„É´„ÇÆ„Éº„ÄÇËá™‰ø°„ÇíÊåÅ„Å£„Å¶Ê≠©„Åø„ÇíÈÄ≤„ÇÅ„Å¶',
                    'Â§©Á©∫„ÅÆ„Çà„ÅÜ„Å´Â∫É„Åå„ÇãË¶ñÈáé„Å®ÂäõÂº∑„ÅÑÊÑèÂøó„Åß„ÄÅÂ§ß„Åç„Å™ÊàêÊûú„ÇíÊâã„Å´„Åô„ÇãÊôÇ',
                    'ÂâµÈÄ†‰∏ª„ÅÆ„Çà„ÅÜ„Å™Áô∫ÊÉ≥Âäõ„ÅåÂÜ¥„Åà„ÇãÊó•„ÄÇÊñ∞„Åü„Å™„Éó„É≠„Ç∏„Çß„ÇØ„Éà„ÇíÂßã„ÇÅ„Çã„ÅÆ„Å´ÊúÄÈÅ©'
                ],
                'Âù§': [
                    'Âú∞„ÅÆÂç¶„ÄÇÊØç„Å™„ÇãÂ§ßÂú∞„ÅÆ„Çà„ÅÜ„Å´Âèó„ÅëÂÖ•„Çå„ÇãÂøÉ„Åß‰∫∫ÈñìÈñ¢‰øÇ„ÇíË±ä„Åã„Å´',
                    'ÂåÖÂÆπÂäõ„Å®ÂØõÂÆπ„Åï„Åå„ÅÇ„Å™„Åü„ÅÆÊúÄÂ§ß„ÅÆÊ≠¶Âô®„ÄÇÂë®Âõ≤„ÇíÊîØ„Åà„ÇãÂΩπÂâ≤„ÅåÂÖâ„Çä„Åæ„Åô',
                    'Â§ßÂú∞„ÅÆÊÅµ„Åø„ÅÆ„Çà„ÅÜ„Å´„ÄÅ‰∏é„Åà„ÇãÂøÉ„ÅåÂ∑°„ÇäÂ∑°„Å£„Å¶Âπ∏ÈÅã„Çí„ÇÇ„Åü„Çâ„Åó„Åæ„Åô',
                    'ÊüîËªüÊÄß„Å®ÂçîË™øÊÄß„ÇíÊ¥ª„Åã„Åó„Å¶„ÄÅ„ÉÅ„Éº„É†„ÉØ„Éº„ÇØ„ÅßÊàêÂäü„ÇíÂèé„ÇÅ„ÇãÊöóÁ§∫'
                ],
                'Â±Ø': [
                    'Âßã„Åæ„Çä„ÅÆÂõ∞Èõ£„ÄÇÊñ∞ËäΩ„ÅåÂúü„ÇíÊäº„Åó‰∏ä„Åí„Çã„Çà„ÅÜ„Å´„ÄÅÂøçËÄêÂº∑„ÅèÊ≠©„ÇÇ„ÅÜ',
                    'Âõ∞Èõ£„ÅØÊàêÈï∑„ÅÆ„Åü„ÇÅ„ÅÆË©¶Á∑¥„ÄÇ‰πó„ÇäË∂ä„Åà„ÅüÂÖà„Å´Â§ß„Åç„Å™È£õË∫ç„ÅåÂæÖ„Å£„Å¶„ÅÑ„Åæ„Åô',
                    'Á®Æ„Åã„ÇâËäΩ„ÅåÂá∫„ÇãÁû¨Èñì„ÅÆ„Çà„ÅÜ„Å´„ÄÅÊ∫ñÂÇôÊúüÈñì„ÅÆÂä™Âäõ„ÅåÂÆü„ÇíÁµê„Å≥Âßã„ÇÅ„Çã',
                    'Âä©„Åë„ÇíÊ±Ç„ÇÅ„Çã„Åì„Å®„ÇíÊÅê„Çå„Åö„Å´„ÄÇ‰ª≤Èñì„Å®ÊîØ„ÅàÂêà„Å£„Å¶Âõ∞Èõ£„Çí‰πó„ÇäÂàá„Å£„Å¶'
                ],
                'Ëíô': [
                    'Â≠¶„Å≥„ÅÆÂç¶„ÄÇÁ¥†Áõ¥„Å™ÂøÉ„ÅßÊñ∞„Åó„ÅÑÁü•Ë≠ò„ÇÑÁµåÈ®ì„ÇíÂê∏Âèé„Åô„ÇãÊôÇ',
                    'ÂàùÂøÉËÄÖ„ÅÆÂøÉ„ÇíÂ§ßÂàá„Å´„ÄÇË¨ôËôö„Å™ÂßøÂã¢„ÅåÊñ∞„Åü„Å™Êââ„ÇíÈñã„ÅèÈçµ„Å®„Å™„Çä„Åæ„Åô',
                    'Áü•Ë≠òÊ¨≤„ÅåÈ´ò„Åæ„Å£„Å¶„ÅÑ„Çã‰ªä„ÄÅÁ©çÊ•µÁöÑ„Å´Â≠¶„Å∂„Åì„Å®„ÅßÂ§ß„Åç„ÅèÊàêÈï∑„Åß„Åç„Çã',
                    'Â∏´„ÇÑÂÖàËº©„Åã„Çâ„ÅÆÊïô„Åà„ÇíÁ¥†Áõ¥„Å´Âèó„ÅëÂÖ•„Çå„Çã„Åì„Å®„Åß„ÄÅÈÅìÁ≠ã„ÅåË¶ã„Åà„Å¶„Åç„Åæ„Åô'
                ],
                'ÈúÄ': [
                    'ÂæÖ„Å§„Åì„Å®„ÅÆÂ§ßÂàá„Åï„ÄÇÈõ≤„ÅåÈõ®„ÇíÈÅã„Å∂„Çà„ÅÜ„Å´„ÄÅ„Çø„Ç§„Éü„É≥„Ç∞„ÇíË¶ãÊ•µ„ÇÅ„Çà„ÅÜ',
                    'ÊÄ•„Åå„Å∞Âõû„Çå„ÅÆÁ≤æÁ•û„Åß„ÄÇ‰ªä„ÅØÊ∫ñÂÇô„Å®ÂÖÖÈõª„ÅÆÊôÇÈñì„ÇíÂ§ßÂàá„Å´„Åó„Å¶„Åè„Å†„Åï„ÅÑ',
                    'Â§©„ÅÆÊôÇ„ÇíÂæÖ„Å§Ë≥¢„Åï„Åå„ÄÅÊúÄËâØ„ÅÆÁµêÊûú„Çí„ÇÇ„Åü„Çâ„Åó„Åæ„Åô„ÄÇÁÑ¶„Çä„ÅØÁ¶ÅÁâ©',
                    'ÂæÖÊ©ü„Åô„Çã„Åì„Å®„ÅßÂäõ„ÇíËìÑ„Åà„ÄÅÁµ∂Â•Ω„ÅÆ„ÉÅ„É£„É≥„Çπ„ÇíÁ¢∫ÂÆü„Å´„ÇÇ„ÅÆ„Å´„Åß„Åç„Çã'
                ],
                'Ë®ü': [
                    '‰∫â„ÅÑ„ÅÆÂç¶„ÄÇÂØæÁ´ã„ÇíÈÅø„Åë„ÄÅË©±„ÅóÂêà„ÅÑ„ÅßËß£Ê±∫„ÅÆÈÅì„ÇíÊé¢„Åù„ÅÜ',
                    'ÊÑèË¶ã„ÅÆÈÅï„ÅÑ„ÇÇÊàêÈï∑„ÅÆÁ≥ß„ÄÇÁõ∏Êâã„ÅÆÁ´ãÂ†¥„ÇíÁêÜËß£„Åó„Çà„ÅÜ„Å®„Åô„ÇãÂßøÂã¢„ÅåÂ§ßÂàá',
                    '‰∫â„ÅÜ„Çà„Çä„ÇÇË™øÂíå„ÇíÈÅ∏„Å∂„Åì„Å®„Åß„ÄÅ‰∫àÊÉ≥‰ª•‰∏ä„ÅÆËâØ„ÅÑÁµêÊûú„ÅåÁîü„Åæ„Çå„Åæ„Åô',
                    'Ê≠£Áæ©ÊÑü„ÅØÂ§ßÂàá„Åß„Åô„Åå„ÄÅÊôÇ„Å´„ÅØÂ¶•Âçî„ÇÇÂøÖË¶Å„ÄÇ„Éê„É©„É≥„Çπ„ÇíÂøÉ„Åå„Åë„Å¶'
                ],
                'Â∏´': [
                    'ÁµÑÁπî„ÅÆÂç¶„ÄÇ„É™„Éº„ÉÄ„Éº„Å®„Åó„Å¶„ÅÆÂô®„ÇíÁ£®„Åç„ÄÅ„Åø„Çì„Å™„ÇíÂ∞é„ÅèÂΩπÂâ≤',
                    'Áµ±ÁéáÂäõ„Å®Ë≤¨‰ªªÊÑü„ÅåË©¶„Åï„Çå„ÇãÊôÇ„ÄÇ„ÉÅ„Éº„É†ÂÖ®‰Ωì„ÅÆ„Åì„Å®„ÇíËÄÉ„Åà„Å¶Ë°åÂãï„Çí',
                    'ÊåáÂ∞éËÄÖ„Å®„Åó„Å¶„ÅÆË≥áË≥™„ÅåÈñãËä±„Åô„ÇãÊó•„ÄÇÈÉ®‰∏ã„ÇÑÂæåËº©„Å∏„ÅÆÈÖçÊÖÆ„ÇíÂøò„Çå„Åö„Å´',
                    'Ë¶èÂæã„Å®Áß©Â∫è„ÇíÈáç„Çì„Åò„Çã„Åì„Å®„Åß„ÄÅÁµÑÁπîÂÖ®‰Ωì„ÅÆÂäõ„ÇíÊúÄÂ§ßÈôê„Å´Âºï„ÅçÂá∫„Åõ„Çã'
                ],
                'ÊØî': [
                    'Ë¶™„Åó„Åø„ÅÆÂç¶„ÄÇ‰∫∫„Å®„ÅÆÁµÜ„ÇíÊ∑±„ÇÅ„ÄÅÂçîÂäõ„ÅóÂêà„ÅÜ„Åì„Å®„ÅßÂπ∏ÈÅã„ÅåËàû„ÅÑËæº„ÇÄ',
                    'ÂíåÂêà„ÅÆÁ≤æÁ•û„Åß‰∫∫„Å®Êé•„Åô„Çã„Åì„Å®„Åß„ÄÅÊÄù„Çè„Å¨ÂçîÂäõËÄÖ„ÅåÁèæ„Çå„Çã„Åã„ÇÇ',
                    'ÂèãÊÉÖ„Å®‰ø°È†º„ÅÆÁµÜ„Åå„ÄÅÂõ∞Èõ£„Å™Áä∂Ê≥Å„ÇíÊâìÈñã„Åô„ÇãÂäõ„Å®„Å™„Çä„Åæ„Åô',
                    '‰ª≤Èñì„Å®„ÅÆÁµêÊùü„ÇíÂ§ßÂàá„Å´„ÄÇ‰∏Ä‰∫∫„Åß„ÅØÊàê„ÅóÂæó„Å™„ÅÑ„Åì„Å®„ÇÇÁöÜ„Å®„Å™„ÇâÂèØËÉΩ'
                ]
            };
            const detailArray = details[hexagram.name] || [''];
            return detailArray[Math.floor(Math.random() * detailArray.length)];
        }

        function getFortuneMessage(type, score) {
            const messages = {
                love: {
                    5: [
                        'ÂøÉ„ÅåÈñã„Åã„Çå„Å¶„ÅÑ„Çã‰ªä„ÄÅÁúü„ÅÆÊÑõ„ÅåËäΩÂêπ„ÅèÊôÇ„ÄÇÁ¥†Áõ¥„Å™Ê∞óÊåÅ„Å°„ÇíÂ§ßÂàá„Å´„ÄÇ',
                        'ÊÑõ„ÅØ‰∏é„Åà„Çã„ÇÇ„ÅÆ„ÄÇ„ÅÇ„Å™„Åü„ÅÆÂÑ™„Åó„Åï„Åå„ÄÅÊ∑±„ÅÑ„Å§„Å™„Åå„Çä„ÇíËÇ≤„Åø„Åæ„Åô„ÄÇ',
                        'ÈÅãÂëΩÁöÑ„Å™Âá∫‰ºö„ÅÑ„ÇÑÊ∑±„ÅÑÁµÜ„Å´ÊÅµ„Åæ„Çå„Çã‰∫àÊÑü„ÄÇÂøÉ„ÇíÈñã„ÅÑ„Å¶‰∫∫„Å®Êé•„Åó„Å¶„ÄÇ',
                        'ÊÑõÊÉÖÈÅã„ÅåÊúÄÈ´òÊΩÆ„Å´„ÄÇ„Éë„Éº„Éà„Éä„Éº„Å®„ÅÆÈñ¢‰øÇ„Åå„Çà„Çä‰∏ÄÂ±§Ê∑±„Åæ„Çä„Åù„ÅÜ„ÄÇ',
                        'È≠ÖÂäõ„ÅåËºù„ÅÑ„Å¶„ÅÑ„Çã‰ªä„ÄÅÁ©çÊ•µÁöÑ„Å™„Ç¢„Éó„É≠„Éº„ÉÅ„ÅåÂπ∏ÈÅã„ÇíÂëº„Å≥Ëæº„Åø„Åæ„Åô„ÄÇ'
                    ],
                    4: [
                        'Áõ∏Êâã„ÅÆÂøÉ„ÇíÁêÜËß£„Åó„Çà„ÅÜ„Å®„Åô„ÇãÂßøÂã¢„Åå„ÄÅÈñ¢‰øÇ„ÇíÊ∑±„ÇÅ„Çã„Åß„Åó„Çá„ÅÜ„ÄÇ',
                        'Â∞è„Åï„Å™ÊÄù„ÅÑ„ÇÑ„Çä„ÅÆÁ©ç„ÅøÈáç„Å≠„Åå„ÄÅÂ§ß„Åç„Å™ÊÑõ„Å∏„Å®ÂÆü„ÇíÁµê„Å≥„Åæ„Åô„ÄÇ',
                        'Ë™†ÂÆü„Å™Ê∞óÊåÅ„Å°„ÅåÁõ∏Êâã„Å´‰ºù„Çè„Çä„ÄÅ‰ø°È†ºÈñ¢‰øÇ„ÅåÁØâ„Åã„Çå„Å¶„ÅÑ„Åç„Åæ„Åô„ÄÇ',
                        '„Ç≥„Éü„É•„Éã„Ç±„Éº„Ç∑„Éß„É≥„ÇíÂ§ßÂàá„Å´„Åô„Çã„Åì„Å®„Åß„ÄÅÊÑõ„ÅåËÇ≤„Åæ„Çå„ÇãÊó•„ÄÇ',
                        'ÂÑ™„Åó„Åï„Å®ÂåÖÂÆπÂäõ„Åß„ÄÅÂë®Âõ≤„ÅÆ‰∫∫„ÄÖ„ÅÆÂøÉ„ÇíÊ∏©„Åã„ÅèÂåÖ„ÅøËæº„Çì„Åß„ÄÇ'
                    ],
                    3: [
                        'ÁÑ¶„Çâ„ÅöËá™ÂàÜ„Çâ„Åó„Åè„ÅÑ„Çã„Åì„Å®„ÄÇ„Åù„Çå„ÅåÊúÄÈ´ò„ÅÆÈ≠ÖÂäõ„Å®„Å™„Çä„Åæ„Åô„ÄÇ',
                        '„ÅÇ„Çä„ÅÆ„Åæ„Åæ„ÅÆËá™ÂàÜ„ÇíÊÑõ„Åô„Çã„Åì„Å®„Åã„Çâ„ÄÅÁúü„ÅÆÊÑõ„ÅØÂßã„Åæ„Çä„Åæ„Åô„ÄÇ',
                        'ÂÆâÂÆö„Åó„ÅüÊÑõÊÉÖÈñ¢‰øÇ„ÇíÁ∂≠ÊåÅ„Åô„Çã„Åü„ÇÅ„Å´„ÄÅÊó•„ÄÖ„ÅÆÊÑüË¨ù„ÇíÂøò„Çå„Åö„Å´„ÄÇ',
                        '„Éê„É©„É≥„Çπ„ÅÆÂèñ„Çå„ÅüÈñ¢‰øÇÊÄß„Åå„ÄÅÈï∑Á∂ö„Åç„Åô„ÇãÊÑõ„ÅÆÁßòË®£„Åß„Åô„ÄÇ',
                        'ÂøÉ„ÅÆÂπ≥ÂÆâ„Çí‰øù„Å§„Åì„Å®„Åß„ÄÅÊÑõÊÉÖÈÅã„ÇÇÂÆâÂÆö„Åó„Å¶Âêë‰∏ä„Åó„Å¶„ÅÑ„Åç„Åæ„Åô„ÄÇ'
                    ],
                    2: [
                        '‰ªä„ÅØÂÜÖÈù¢„ÇíÁ£®„ÅèÊôÇ„ÄÇËá™ÂàÜ„ÇíÂ§ßÂàá„Å´„Åô„ÇãÂøÉ„Åå„ÄÅÊÑõ„ÇíÂºï„ÅçÂØÑ„Åõ„Åæ„Åô„ÄÇ',
                        'ÊÄ•„Åå„Å∞Âõû„Çå„ÄÇ‰ªäÊó•„ÅØËá™ÂàÜ„Å®„ÅÆÂØæË©±„ÇíÂ§ßÂàá„Å´„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ',
                        'Áõ∏Êâã„Å®„ÅÆË∑ùÈõ¢„ÇíË¶ãÁõ¥„Åó„ÄÅ„Åä‰∫í„ÅÑ„ÅÆÊôÇÈñì„ÇíÂ∞äÈáç„Åô„Çã„Åì„Å®„ÅåÂ§ßÂàá„ÄÇ',
                        'Â∞è„Åï„Å™Ë™§Ëß£„ÅåÁîü„Åò„ÇÑ„Åô„ÅÑÊó•„ÄÇË®ÄËëâÈÅ∏„Å≥„Å´Ê∞ó„Çí„Å§„Åë„Å¶„ÄÇ',
                        '‰∏ÄÊ≠©Âºï„ÅÑ„Å¶Áõ∏Êâã„ÇíË¶ã„Å§„ÇÅÁõ¥„Åô„Åì„Å®„Åß„ÄÅÊñ∞„Åü„Å™È≠ÖÂäõ„ÇíÁô∫Ë¶ã„Åß„Åç„Åù„ÅÜ„ÄÇ'
                    ],
                    1: [
                        'ÂøÉ„ÅÆÊ∫ñÂÇô„ÅåÊï¥„ÅÜ„Åæ„Åß„ÄÅÈùô„Åã„Å´ÂæÖ„Å§„Åì„Å®„ÇÇÊÑõ„ÅÆÂΩ¢„Åß„Åô„ÄÇ',
                        '‰ªä„ÅÆÁµåÈ®ì„Åô„Åπ„Å¶„Åå„ÄÅÊú™Êù•„ÅÆÊ∑±„ÅÑÊÑõ„Å∏„ÅÆÁ§é„Å®„Å™„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇ',
                        'ÊÑõ„Å´Èñ¢„Åó„Å¶ÊÖéÈáç„Å´„Å™„Çä„Åô„Åé„Å¶„ÅÑ„Çã„Åã„ÇÇ„ÄÇÂøÉ„ÇíÂ∞ë„ÅóËªΩ„ÇÑ„Åã„Å´„ÄÇ',
                        'ÈÅéÂéª„ÅÆÁµåÈ®ì„ÇíÊ¥ª„Åã„Åó„ÄÅ„Çà„ÇäÊàêÁÜü„Åó„ÅüÊÑõ„ÇíËÇ≤„ÇÄÊ∫ñÂÇô„Çí„Åó„Åæ„Åó„Çá„ÅÜ„ÄÇ',
                        'Ëá™ÂàÜËá™Ë∫´„Å®Âêë„ÅçÂêà„ÅÜÊôÇÈñì„Åå„ÄÅÂ∞ÜÊù•„ÅÆÂπ∏„Åõ„Å™Èñ¢‰øÇ„Å´„Å§„Å™„Åå„Çä„Åæ„Åô„ÄÇ'
                    ]
                },
                work: {
                    5: [
                        '„ÅÇ„Å™„Åü„ÅÆÊâçËÉΩ„ÅåÂÖâ„ÇãÊôÇ„ÄÇËá™‰ø°„ÇíÊåÅ„Å£„Å¶ÂâçÈÄ≤„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ',
                        'ÂâµÈÄ†Âäõ„ÅåÂÜ¥„Åà„Çã‰ªäÊó•„ÄÅÊñ∞„Åó„ÅÑ„Ç¢„Ç§„Éá„Ç¢„ÅåÂΩ¢„Å´„Å™„Çã„Åß„Åó„Çá„ÅÜ„ÄÇ',
                        '‰ªï‰∫ãÈÅã„ÅåÁµ∂Â•ΩË™ø„ÄÇÁ©çÊ•µÁöÑ„Å™„ÉÅ„É£„É¨„É≥„Ç∏„ÅåÂ§ß„Åç„Å™ÊàêÊûú„Çí„ÇÇ„Åü„Çâ„Åó„Åæ„Åô„ÄÇ',
                        '„É™„Éº„ÉÄ„Éº„Ç∑„ÉÉ„Éó„ÇíÁô∫ÊèÆ„Åô„ÇãÁµ∂Â•Ω„ÅÆÊ©ü‰ºö„ÄÇÂë®Âõ≤„ÇíÂ∞é„ÅÑ„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ',
                        'Âä™Âäõ„ÅåÂ†±„Çè„Çå„ÇãÊôÇ„ÄÇÈï∑Âπ¥„ÅÆÈ†ëÂºµ„Çä„ÅåË™ç„ÇÅ„Çâ„Çå„ÄÅÊòáÈÄ≤„ÅÆ„ÉÅ„É£„É≥„Çπ„ÇÇ„ÄÇ'
                    ],
                    4: [
                        'ÂçîÂäõËÄÖ„Å´ÊÅµ„Åæ„Çå„ÇãÊó•„ÄÇ„ÉÅ„Éº„É†„ÉØ„Éº„ÇØ„ÇíÂ§ßÂàá„Å´„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ',
                        'Âä™Âäõ„ÅåÂÆü„ÇíÁµê„Å≥Âßã„ÇÅ„Å¶„ÅÑ„Åæ„Åô„ÄÇÁ∂ôÁ∂ö„Åì„Åù„ÅåÂäõ„Å™„Çä„ÄÇ',
                        '‰ªï‰∫ã„Åß„ÅÆË©ï‰æ°„ÅåÈ´ò„Åæ„Å£„Å¶„ÅÑ„Çã‰ªä„ÄÅÊñ∞„Åó„ÅÑ„Éó„É≠„Ç∏„Çß„ÇØ„Éà„Å´ÊåëÊà¶„Çí„ÄÇ',
                        'ÂêåÂÉö„Å®„ÅÆÈÄ£Êê∫„Åå„Çπ„É†„Éº„Ç∫„Å´„ÄÇÂçîË™øÊÄß„ÇíÊ¥ª„Åã„Åó„Å¶ÊàêÊûú„Çí‰∏ä„Åí„Å¶„ÄÇ',
                        'Ë®àÁîª„Åó„Å¶„ÅÑ„Åü„Åì„Å®„ÅåÈ†ÜË™ø„Å´ÈÄ≤„ÇÄÊöóÁ§∫„ÄÇÁùÄÂÆü„Å´Ê≠©„Åø„ÇíÈÄ≤„ÇÅ„Åæ„Åó„Çá„ÅÜ„ÄÇ'
                    ],
                    3: [
                        'ÁùÄÂÆü„Å™Ê≠©„Åø„ÅåÊàêÂäü„Å∏„ÅÆÈÅì„ÄÇÁÑ¶„Çâ„Åö‰∏ÄÊ≠©„Åö„Å§ÈÄ≤„Åø„Åæ„Åó„Çá„ÅÜ„ÄÇ',
                        '‰ªäÊó•„ÅÆÂ∞è„Åï„Å™Á©ç„ÅøÈáç„Å≠„Åå„ÄÅÊòéÊó•„ÅÆÂ§ß„Åç„Å™ÊàêÊûú„Å´„Å§„Å™„Åå„Çä„Åæ„Åô„ÄÇ',
                        'ÂÆâÂÆö„Åó„Åü‰ªï‰∫ã„Å∂„Çä„ÅåÂë®Âõ≤„ÅÆ‰ø°È†º„ÇíÂæó„Å¶„ÅÑ„Åæ„Åô„ÄÇÁèæÁä∂Á∂≠ÊåÅ„ÅßÂçÅÂàÜ„ÄÇ',
                        '„É´„Éº„ÉÜ„Ç£„É≥„ÉØ„Éº„ÇØ„Çí‰∏ÅÂØß„Å´„Åì„Å™„Åô„Åì„Å®„Åß„ÄÅÂü∫Áõ§„ÅåÂõ∫„Åæ„Çä„Åæ„Åô„ÄÇ',
                        '„Éê„É©„É≥„Çπ„ÅÆÂèñ„Çå„ÅüÂÉç„ÅçÊñπ„Åß„ÄÅÈï∑ÊúüÁöÑ„Å™ÊàêÂäü„ÇíÁõÆÊåá„Åó„Åæ„Åó„Çá„ÅÜ„ÄÇ'
                    ],
                    2: [
                        'Ê∫ñÂÇô„Å®Â≠¶„Å≥„ÅÆÊôÇ„ÄÇ‰ªä„ÅØÂü∫Á§é„ÇíÂõ∫„ÇÅ„Çã„Åì„Å®„Å´ÈõÜ‰∏≠„Çí„ÄÇ',
                        'Âõ∞Èõ£„ÇÇÊàêÈï∑„ÅÆÁ≥ß„ÄÇ‰ªä„ÅÆÁµåÈ®ì„ÅåÂ∞ÜÊù•„ÅÆË≤°Áî£„Å®„Å™„Çä„Åæ„Åô„ÄÇ',
                        'Â∞ë„ÅóÊÖéÈáç„Å´„Å™„Çä„Åô„Åé„Å¶„ÅÑ„Çã„Åã„ÇÇ„ÄÇÊôÇ„Å´„ÅØÂ§ßËÉÜ„Å™Ë°åÂãï„ÇÇÂøÖË¶Å„Åß„Åô„ÄÇ',
                        '„Çπ„Ç≠„É´„Ç¢„ÉÉ„Éó„ÅÆÊ©ü‰ºö„ÇíÁ©çÊ•µÁöÑ„Å´Ê¥ªÁî®„Åó„Å¶„ÄÅÂ∞ÜÊù•„Å´ÂÇô„Åà„Å¶„ÄÇ',
                        '‰∏äÂè∏„ÇÑÂÖàËº©„Åã„Çâ„ÅÆ„Ç¢„Éâ„Éê„Ç§„Çπ„ÇíÁ¥†Áõ¥„Å´Âèó„ÅëÂÖ•„Çå„Çã„Åì„Å®„ÅåÊàêÈï∑„ÅÆÈçµ„ÄÇ'
                    ],
                    1: [
                        '‰ºëÊÅØ„ÇÇ‰ªï‰∫ã„ÅÆ„ÅÜ„Å°„ÄÇÂøÉË∫´„ÇíÊï¥„Åà„Çã„Åì„Å®„ÅßÊñ∞„Åü„Å™Âäõ„ÅåÁîü„Åæ„Çå„Åæ„Åô„ÄÇ',
                        'Ë¶ãÁõ¥„Åó„ÅÆÊôÇÊúü„ÄÇÁèæÁä∂„ÇíÂÆ¢Ë¶≥Ë¶ñ„Åô„Çã„Åì„Å®„ÅßÈÅìÁ≠ã„ÅåË¶ã„Åà„Å¶„Åç„Åæ„Åô„ÄÇ',
                        '„Éü„Çπ„Å´Ê≥®ÊÑè„ÅåÂøÖË¶Å„Å™Êó•„ÄÇÁ¢∫Ë™ç‰ΩúÊ•≠„ÇíÊÄ†„Çâ„Å™„ÅÑ„Çà„ÅÜ„Å´„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ',
                        '„Çπ„Éà„É¨„Çπ„ÅåÊ∫ú„Åæ„Çä„ÇÑ„Åô„ÅÑÊôÇÊúü„ÄÇÈÅ©Â∫¶„Å™‰ºëÊÜ©„ÅßÂøÉ„Çí„É™„Éï„É¨„ÉÉ„Ç∑„É•„ÄÇ',
                        '‰ªä„ÅØÂÆà„Çä„ÅÆÂßøÂã¢„ÅåÂ§ßÂàá„ÄÇÁÑ°ÁêÜ„Çí„Åõ„Åö„ÄÅ‰ΩìË™øÁÆ°ÁêÜ„ÇíÊúÄÂÑ™ÂÖà„Å´„ÄÇ'
                    ]
                },
                health: {
                    5: [
                        'ÂøÉË∫´„Å®„ÇÇ„Å´Áµ∂Â•ΩË™ø„ÄÇ„Åì„ÅÆÊ¥ªÂäõ„ÇíÂ§ßÂàá„Å™‰∫∫„Å®ÂàÜ„Åã„Å°Âêà„Å£„Å¶„ÄÇ',
                        'ÁîüÂëΩÂäõ„Å´Ê∫Ä„Å°„Å¶„ÅÑ„Åæ„Åô„ÄÇÊÑüË¨ù„ÅÆÊ∞óÊåÅ„Å°„Çí‰Ωì„ÅßË°®Áèæ„Åó„Åæ„Åó„Çá„ÅÜ„ÄÇ',
                        '„Ç®„Éç„É´„ÇÆ„Éº„ÅåÊ∫¢„Çå„Å¶„ÅÑ„Çã‰ªä„ÄÅÊñ∞„Åó„ÅÑÈÅãÂãï„ÇÑÂÅ•Â∫∑Ê≥ï„ÇíÂßã„ÇÅ„Çã„ÅÆ„Å´ÊúÄÈÅ©„ÄÇ',
                        'ÂÖçÁñ´Âäõ„ÅåÈ´ò„Åæ„Å£„Å¶„ÅÑ„ÇãÊôÇÊúü„ÄÇÁ©çÊ•µÁöÑ„Å´Â§ñ„Å´Âá∫„Å¶Ê¥ªÂãï„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ',
                        'ÂøÉ„ÇÇ‰Ωì„ÇÇËªΩ„ÇÑ„Åã„ÄÇ„Éù„Ç∏„ÉÜ„Ç£„Éñ„Å™Ê∞óÊåÅ„Å°„ÅåÂÅ•Â∫∑„Çí„Åï„Çâ„Å´Â¢óÈÄ≤„Åï„Åõ„Åæ„Åô„ÄÇ'
                    ],
                    4: [
                        '‰ΩìË™øËâØÂ•Ω„Å™‰ªä„ÄÅÊñ∞„Åó„ÅÑÁøíÊÖ£„ÇíÂßã„ÇÅ„Çã„ÅÆ„Å´ÊúÄÈÅ©„Åß„Åô„ÄÇ',
                        'ÂÅ•Â∫∑„Å™ÂøÉ„ÅØÂÅ•Â∫∑„Å™‰Ωì„Å´ÂÆø„Çã„ÄÇÂâçÂêë„Åç„Å™Ê∞óÊåÅ„Å°„ÇíÂ§ßÂàá„Å´„ÄÇ',
                        'ÈÅãÂãï‰∏çË∂≥Ëß£Ê∂à„ÅÆ„ÉÅ„É£„É≥„Çπ„ÄÇÊ•Ω„Åó„Åè‰Ωì„ÇíÂãï„Åã„Åô„Åì„Å®„Åã„ÇâÂßã„ÇÅ„Å¶„ÄÇ',
                        'Ê†ÑÈ§ä„Éê„É©„É≥„Çπ„ÅÆËâØ„ÅÑÈ£ü‰∫ã„Åå„ÄÅ„Åï„Çâ„Å™„ÇãÂÅ•Â∫∑Â¢óÈÄ≤„Å´„Å§„Å™„Åå„Çä„Åæ„Åô„ÄÇ',
                        'ËâØ„ÅÑÁù°Áú†„Éë„Çø„Éº„É≥„ÅåÁ¢∫Á´ã„Åï„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ„Åì„ÅÆË™øÂ≠ê„ÇíÁ∂≠ÊåÅ„Åó„Å¶„ÄÇ'
                    ],
                    3: [
                        '„Éê„É©„É≥„Çπ„ÇíÊÑèË≠ò„Åó„ÅüÁîüÊ¥ª„Çí„ÄÇË¶èÂâáÊ≠£„Åó„Åï„ÅåÈçµ„Å®„Å™„Çä„Åæ„Åô„ÄÇ',
                        'ÁÑ°ÁêÜ„ÅØÁ¶ÅÁâ©„ÄÇÈÅ©Â∫¶„Å™‰ºëÊÅØ„ÅßÂøÉË∫´„ÅÆ„Éê„É©„É≥„Çπ„Çí‰øù„Å°„Åæ„Åó„Çá„ÅÜ„ÄÇ',
                        'ÂÅ•Â∫∑Áä∂ÊÖã„ÅØÂÆâÂÆö„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇÁèæÂú®„ÅÆÁîüÊ¥ªÁøíÊÖ£„ÇíÁ∂ôÁ∂ö„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ',
                        '„Çπ„Éà„É¨„ÇπÁÆ°ÁêÜ„Åå‰∏äÊâã„Åè„ÅÑ„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇ„Åì„ÅÆË™øÂ≠ê„ÅßÂøÉ„ÅÆÂÅ•Â∫∑„ÇÇÁ∂≠ÊåÅ„Çí„ÄÇ',
                        '‰∫àÈò≤ÊÑèË≠ò„ÇíÈ´ò„ÇÅ„Çã„Åì„Å®„Åß„ÄÅÂ∞ÜÊù•„ÅÆÂÅ•Â∫∑„É™„Çπ„ÇØ„ÇíÊ∏õ„Çâ„Åõ„Åæ„Åô„ÄÇ'
                    ],
                    2: [
                        '‰Ωì„ÅÆ„Çµ„Ç§„É≥„Å´ËÄ≥„ÇíÂÇæ„Åë„Å¶„ÄÇÊó©„ÇÅ„ÅÆ„Ç±„Ç¢„ÅåÂ§ßÂàá„Åß„Åô„ÄÇ',
                        '‰ªäÊó•„ÅØ‰Ωì„Çí„ÅÑ„Åü„Çè„ÇãÊó•„ÄÇÂÑ™„Åó„ÅèËá™ÂàÜ„ÇíÊâ±„Å£„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ',
                        'Â∞ë„ÅóÁñ≤„Çå„ÅåÊ∫ú„Åæ„Å£„Å¶„ÅÑ„Çã„Çà„ÅÜ„Åß„Åô„ÄÇË≥™„ÅÆËâØ„ÅÑ‰ºëÊÅØ„ÇíÂøÉ„Åå„Åë„Å¶„ÄÇ',
                        'È£üÁîüÊ¥ª„ÇíË¶ãÁõ¥„Åô„Çø„Ç§„Éü„É≥„Ç∞„ÄÇ‰Ωì„Å´ÂÑ™„Åó„ÅÑÈ£üÊùê„ÇíÈÅ∏„Çì„Åß„Åø„Å¶„ÄÇ',
                        'ËªΩ„ÅÑÈÅãÂãï„Åã„ÇâÂßã„ÇÅ„Å¶„ÄÅÂæê„ÄÖ„Å´‰ΩìÂäõ„ÇíÂõûÂæ©„Åï„Åõ„Å¶„ÅÑ„Åç„Åæ„Åó„Çá„ÅÜ„ÄÇ'
                    ],
                    1: [
                        'ÂçÅÂàÜ„Å™‰ºëÊÅØ„ÇíÂèñ„Çä„Åæ„Åó„Çá„ÅÜ„ÄÇÂõûÂæ©„Å´„ÅØ„Åù„Çå„Å™„Çä„ÅÆÊôÇÈñì„ÅåÂøÖË¶Å„Åß„Åô„ÄÇ',
                        '‰ªä„ÅØÂÖÖÈõª„ÅÆÊôÇÊúü„ÄÇÁÑ¶„Çâ„Åö‰ΩìË™øÂõûÂæ©„Å´Â∞ÇÂøµ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ',
                        'ÁÑ°ÁêÜ„ÅØÁµ∂ÂØæ„Å´Á¶ÅÁâ©„ÄÇ‰ΩìË™ø„ÇíÊúÄÂÑ™ÂÖà„Å´ËÄÉ„Åà„Å¶Ë°åÂãï„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ',
                        'ÂåªÁôÇÊ©üÈñ¢„Åß„ÅÆÁõ∏Ë´á„ÇÇÊ§úË®é„Çí„ÄÇÊó©„ÇÅ„ÅÆÂØæÂá¶„ÅåÂõûÂæ©„Å∏„ÅÆËøëÈÅì„Åß„Åô„ÄÇ',
                        '„ÇÜ„Å£„Åè„Çä„Å®„Åó„ÅüÂëºÂê∏„Å®ÁûëÊÉ≥„Åß„ÄÅÂøÉË∫´„ÅÆ„Éê„É©„É≥„Çπ„ÇíÊï¥„Åà„Å¶„ÄÇ'
                    ]
                },
                money: {
                    5: [
                        'ÈáëÈÅã‰∏äÊòá‰∏≠„ÄÇ„Åü„Å†„ÅóÊÑüË¨ù„ÅÆÊ∞óÊåÅ„Å°„ÇíÂøò„Çå„Åö„Å´„ÄÇ',
                        'Ë±ä„Åã„Åï„ÅØÂæ™Áí∞„Åô„Çã„ÇÇ„ÅÆ„ÄÇÂàÜ„Åã„Å°Âêà„ÅÜÂøÉ„ÇíÂ§ßÂàá„Å´„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ',
                        'ÊäïË≥á„ÇÑÂâØÊ•≠„Å´ËâØ„ÅÑ„Çø„Ç§„Éü„É≥„Ç∞„ÄÇ„Åü„Å†„ÅóÊÖéÈáç„Å™Âà§Êñ≠„ÇÇÂøÖË¶Å„Åß„Åô„ÄÇ',
                        'Ëá®ÊôÇÂèéÂÖ•„ÅÆÂèØËÉΩÊÄßÂ§ß„ÄÇÊÄù„Çè„Å¨„Å®„Åì„Çç„Åã„Çâ„ÅäÈáë„ÅåËàû„ÅÑËæº„ÇÄ„Åã„ÇÇ„ÄÇ',
                        'ÈáëÈä≠ÊÑüË¶ö„ÅåÁ†î„ÅéÊæÑ„Åæ„Åï„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇËâØ„ÅÑË≤∑„ÅÑÁâ©„Åå„Åß„Åç„Åù„ÅÜ„ÄÇ'
                    ],
                    4: [
                        'Â†ÖÂÆü„Å™Âà§Êñ≠„ÅåÂêâ„ÄÇ‰ªäÊó•„ÅÆÈÅ∏Êäû„ÅåÊú™Êù•„ÅÆÂÆâÂÆö„Å´„Å§„Å™„Åå„Çä„Åæ„Åô„ÄÇ',
                        'ÂèéÂÖ•„Ç¢„ÉÉ„Éó„ÅÆ„ÉÅ„É£„É≥„ÇπÂà∞Êù•„ÄÇÊ∫ñÂÇô„Åó„Å¶„Åç„Åü„Åì„Å®„ÅåÊ¥ª„Åã„Åï„Çå„Åæ„Åô„ÄÇ',
                        'ÁØÄÁ¥Ñ„ÅÆÂäπÊûú„ÅåÁèæ„ÇåÂßã„ÇÅ„Å¶„ÅÑ„Åæ„Åô„ÄÇ„Åì„ÅÆË™øÂ≠ê„ÅßÁ∂ö„Åë„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ',
                        'Ë®àÁîªÁöÑ„Å™Ë≤ØËìÑ„ÅåÂäü„ÇíÂ•è„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇÂ∞ÜÊù•„Å∏„ÅÆÂÇô„Åà„ÅØÈ†ÜË™ø„Åß„Åô„ÄÇ',
                        '„ÅäÈáë„Å´Èñ¢„Åô„ÇãËâØ„ÅÑ„Éã„É•„Éº„Çπ„ÅåÂ±ä„ÅèÂèØËÉΩÊÄß„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ'
                    ],
                    3: [
                        'Ë®àÁîªÁöÑ„Å™ÊîØÂá∫„ÇíÂøÉ„Åå„Åë„Å¶„ÄÇÂ∞è„Åï„Å™ÁØÄÁ¥Ñ„ÅåÂ§ß„Åç„Å™ÂÆü„ÇíÁµê„Å≥„Åæ„Åô„ÄÇ',
                        'ÁèæÁä∂Á∂≠ÊåÅ„ÅßÂçÅÂàÜ„ÄÇÁÑ°ÁêÜ„Å™ÊäïË≥á„ÅØÈÅø„Åë„ÄÅÂÆâÂÆö„ÇíÈÅ∏„Å≥„Åæ„Åó„Çá„ÅÜ„ÄÇ',
                        'ÂÆ∂Ë®à„ÅÆ„Éê„É©„É≥„Çπ„ÅåËâØÂ•Ω„Åß„Åô„ÄÇ„Åì„ÅÆÁä∂ÊÖã„Çí„Ç≠„Éº„Éó„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ',
                        'ÂøÖË¶Å„Å™„ÇÇ„ÅÆ„Å®Ê¨≤„Åó„ÅÑ„ÇÇ„ÅÆ„ÇíÂå∫Âà•„Åó„Å¶„ÄÅË≥¢„ÅÑÊ∂àË≤ª„ÇíÂøÉ„Åå„Åë„Å¶„ÄÇ',
                        'ÈáëÈä≠ÁÆ°ÁêÜ„Åå‰∏äÊâã„Å´„Å™„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇËá™ÂàÜ„ÇíË§í„ÇÅ„Å¶„ÅÇ„Åí„Åæ„Åó„Çá„ÅÜ„ÄÇ'
                    ],
                    2: [
                        'Âá∫Ë≤ª„ÇíË¶ãÁõ¥„ÅôÊôÇ„ÄÇÊú¨ÂΩì„Å´ÂøÖË¶Å„Å™„ÇÇ„ÅÆ„ÇíË¶ãÊ•µ„ÇÅ„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ',
                        '‰ªä„ÅØÂÆà„Çä„ÅÆÊôÇÊúü„ÄÇÊÖéÈáç„Å™Âà§Êñ≠„ÅåÂ∞ÜÊù•„ÅÆÂÆâÂÆö„ÇíÁØâ„Åç„Åæ„Åô„ÄÇ',
                        'ÁÑ°ÈßÑÈÅ£„ÅÑ„Å´Ê≥®ÊÑè„ÄÇË≥ºÂÖ•Ââç„Å´‰∏ÄÂ∫¶Á´ã„Å°Ê≠¢„Åæ„Å£„Å¶ËÄÉ„Åà„Å¶„Åø„Å¶„ÄÇ',
                        '‰∫àÁÆóÁÆ°ÁêÜ„ÇíË¶ãÁõ¥„Åô„Çø„Ç§„Éü„É≥„Ç∞„ÄÇÂÆ∂Ë®àÁ∞ø„Çí„Å§„Åë„Çã„Åì„Å®„Åã„ÇâÂßã„ÇÅ„Å¶„ÄÇ',
                        'Â∞è„Åï„Å™Âá∫Ë≤ª„ÅÆÁ©ç„ÅøÈáç„Å≠„ÅåÊÑèÂ§ñ„Å®Â§ß„Åç„ÅÑ„ÇÇ„ÅÆ„ÄÇË¶ãÁõ¥„Åó„Çí„ÄÇ'
                    ],
                    1: [
                        'ÊîØÂá∫„ÅØÂøÖË¶ÅÊúÄÂ∞èÈôê„Å´„ÄÇ‰ªä„ÅÆÊàëÊÖ¢„ÅåÊú™Êù•„ÅÆË±ä„Åã„Åï„ÇíÁîü„Åø„Åæ„Åô„ÄÇ',
                        'Ë≤°Â∏É„ÅÆÁ¥ê„ÇíÁ∑†„ÇÅ„Å¶„ÄÇË≥™Á¥†„Å™ÁîüÊ¥ª„ÇÇ‰∏Ä„Å§„ÅÆË±ä„Åã„Åï„Åß„Åô„ÄÇ',
                        'Â§ß„Åç„Å™Âá∫Ë≤ª„ÅØÈÅø„Åë„Å¶„ÄÇÊú¨ÂΩì„Å´ÂøÖË¶Å„Åã„Å©„ÅÜ„ÅãÊÖéÈáç„Å´Âà§Êñ≠„Çí„ÄÇ',
                        'ÈáëÈä≠„Éà„É©„Éñ„É´„Å´Ê≥®ÊÑè„ÄÇÂ•ëÁ¥ÑÊõ∏È°û„ÅØÂøÖ„ÅöÁ¢∫Ë™ç„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ',
                        '‰ªä„ÅØË≤ØËìÑ„ÇíÊúÄÂÑ™ÂÖà„Å´„ÄÇÂ∞ÜÊù•„Å∏„ÅÆÊäïË≥á„Å®ËÄÉ„Åà„Å¶ÊàëÊÖ¢„Åó„Åæ„Åó„Çá„ÅÜ„ÄÇ'
                    ]
                }
            };
            
            const typeMessages = messages[type][score];
            return typeMessages[Math.floor(Math.random() * typeMessages.length)];
        }

        function calculatePillar(year, month, day) {
            const baseYear = 1924;
            const yearIndex = (year - baseYear) % 60;
            const monthIndex = (month + 11) % 12;
            const dayIndex = day % 60;

            return {
                year: {
                    stem: tenStems[yearIndex % 10],
                    branch: twelveBranches[yearIndex % 12],
                    element: fiveElements[Math.floor(yearIndex % 10 / 2)]
                },
                month: {
                    stem: tenStems[monthIndex % 10],
                    branch: twelveBranches[monthIndex],
                    element: fiveElements[Math.floor(monthIndex / 2) % 5]
                },
                day: {
                    stem: tenStems[dayIndex % 10],
                    branch: twelveBranches[dayIndex % 12],
                    element: fiveElements[Math.floor(dayIndex % 10 / 2)]
                }
            };
        }

        function calculateElementCompatibility(userElement, todayElement) {
            const relations = {
                'Êú®': { 'Ê∞¥': 1, 'Êú®': 0, 'ÁÅ´': 0, 'Âúü': -1, 'Èáë': -1 },
                'ÁÅ´': { 'Êú®': 1, 'ÁÅ´': 0, 'Âúü': 0, 'Èáë': -1, 'Ê∞¥': -1 },
                'Âúü': { 'ÁÅ´': 1, 'Âúü': 0, 'Èáë': 0, 'Ê∞¥': -1, 'Êú®': -1 },
                'Èáë': { 'Âúü': 1, 'Èáë': 0, 'Ê∞¥': 0, 'Êú®': -1, 'ÁÅ´': -1 },
                'Ê∞¥': { 'Èáë': 1, 'Ê∞¥': 0, 'Êú®': 0, 'ÁÅ´': -1, 'Âúü': -1 }
            };
            return relations[userElement][todayElement] || 0;
        }

        function generateMessage(score, element) {
            const messages = {
                5: [
                    'Á¥†Êô¥„Çâ„Åó„ÅÑ‰∏ÄÊó•„Å´„Å™„Çä„Åù„ÅÜÔºÅ„ÅÇ„Å™„Åü„ÅÆÈ≠ÖÂäõ„ÅåËºù„ÅèÊôÇ„Åß„Åô',
                    '‰ªäÊó•„ÅØÁâπÂà•„Å™Êó•„ÄÇÊÄù„ÅÑÂàá„Å£„Å¶Êñ∞„Åó„ÅÑ„Åì„Å®„Å´„ÉÅ„É£„É¨„É≥„Ç∏„Çí',
                    'ÈÅãÂã¢„ÅØÊúÄÈ´òÊΩÆÔºÅÁ©çÊ•µÁöÑ„Å´Ë°åÂãï„Åô„Çã„Åì„Å®„ÅßÂ§ß„Åç„Å™ÊàêÊûú„ÇíÂæó„Çâ„Çå„Åæ„Åô',
                    '„Ç®„Éç„É´„ÇÆ„Éº„Å´Ê∫Ä„Å°Ê∫¢„Çå„ÅüÊó•„ÄÇÂë®Âõ≤„Å´„ÇÇËâØ„ÅÑÂΩ±Èüø„Çí‰∏é„Åà„Çâ„Çå„Åù„ÅÜ',
                    'Âπ∏ÈÅã„ÅÆÊòü„Åå„ÅÇ„Å™„Åü„ÇíÁÖß„Çâ„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇËá™‰ø°„ÇíÊåÅ„Å£„Å¶Ê≠©„Çì„Åß„Åè„Å†„Åï„ÅÑ'
                ],
                4: [
                    '„Å®„Å¶„ÇÇËâØ„ÅÑÈÅãÊ∞ó„Åß„Åô„ÄÇÁ©çÊ•µÁöÑ„Å´Ë°åÂãï„Åó„Å¶„Åø„Åæ„Åó„Çá„ÅÜ',
                    'Âë®„Çä„ÅÆ‰∫∫„Å®„ÅÆ„Ç≥„Éü„É•„Éã„Ç±„Éº„Ç∑„Éß„É≥„ÅåÈçµ„Å®„Å™„Çä„Åæ„Åô',
                    'Âä™Âäõ„ÅåÂ†±„Çè„Çå„ÇãÊó•„ÄÇÁ∂ôÁ∂ö„Åó„Å¶„Åç„Åü„Åì„Å®„Å´ËâØ„ÅÑÁµêÊûú„ÅåÊúüÂæÖ„Åß„Åç„Åæ„Åô',
                    'ÂçîÂäõËÄÖ„Å´ÊÅµ„Åæ„Çå„ÄÅ„ÉÅ„Éº„É†„ÉØ„Éº„ÇØ„ÅßÊàêÂäü„ÇíÂèé„ÇÅ„Çâ„Çå„Åù„ÅÜ„Åß„Åô',
                    'ÂâçÂêë„Åç„Å™Ê∞óÊåÅ„Å°„ÅåÂπ∏ÈÅã„ÇíÂºï„ÅçÂØÑ„Åõ„Åæ„Åô„ÄÇÁ¨ëÈ°î„ÇíÂøò„Çå„Åö„Å´'
                ],
                3: [
                    'ÂÆâÂÆö„Åó„ÅüÈÅãÊ∞ó„Åß„Åô„ÄÇ„ÅÑ„Å§„ÇÇÈÄö„Çä„ÅÆÁîüÊ¥ª„ÇíÂ§ßÂàá„Å´',
                    '„Éê„É©„É≥„Çπ„ÇíÊÑèË≠ò„Åó„Å¶ÈÅé„Åî„Åô„Åì„Å®„ÅßÈÅãÊ∞ó„Ç¢„ÉÉ„Éó',
                    'Âπ≥Á©è„Å™‰∏ÄÊó•„ÄÇÁèæÂú®„ÅÆÁä∂Ê≥Å„Å´ÊÑüË¨ù„ÅÆÊ∞óÊåÅ„Å°„ÇíÊåÅ„Å£„Å¶ÈÅé„Åî„Åó„Åæ„Åó„Çá„ÅÜ',
                    'ÁùÄÂÆü„Å™Ê≠©„Åø„ÅåÂ∞ÜÊù•„ÅÆÊàêÂäü„Å´„Å§„Å™„Åå„Çä„Åæ„Åô„ÄÇÁÑ¶„Çâ„ÅöÈÄ≤„Çì„Åß',
                    'ÂøÉ„ÅÆÂπ≥ÂÆâ„Çí‰øù„Å§„Åì„Å®„Åß„ÄÅÁ©è„ÇÑ„Åã„ÅßÂÖÖÂÆü„Åó„ÅüÊó•„Å´„Å™„Çä„Åæ„Åô'
                ],
                2: [
                    'Â∞ë„ÅóÊÖéÈáç„Å´ÈÅé„Åî„Åó„Åæ„Åó„Çá„ÅÜ„ÄÇÁÑ°ÁêÜ„ÅØÁ¶ÅÁâ©„Åß„Åô',
                    '‰ªäÊó•„ÅØÊ∫ñÂÇô„ÅÆÊó•„ÄÇÊòéÊó•„Å∏„ÅÆÂü∫Áõ§„Çí‰Ωú„Çä„Åæ„Åó„Çá„ÅÜ',
                    'Â∞è„Åï„Å™„Åì„Å®„Åã„Çâ‰∏ÅÂØß„Å´Âèñ„ÇäÁµÑ„ÇÄ„Åì„Å®„Åß„ÄÅÈÅãÊ∞ó„Åå‰∏äÂêë„Åç„Åæ„Åô',
                    'Âë®Âõ≤„ÅÆÊÑèË¶ã„Å´ËÄ≥„ÇíÂÇæ„Åë„Çã„Åì„Å®„Åß„ÄÅÊñ∞„Åü„Å™Ê∞ó„Å•„Åç„ÅåÂæó„Çâ„Çå„Åù„ÅÜ',
                    '„ÇÜ„Å£„Åè„Çä„Å®„Åó„Åü„Éö„Éº„Çπ„ÅßÈÄ≤„ÇÄ„Åì„Å®„Åå„ÄÅ‰ªäÊó•„ÅÆÈñãÈÅã„Éù„Ç§„É≥„Éà'
                ],
                1: [
                    '‰ªäÊó•„ÅØÈùô„Åã„Å´ÈÅé„Åî„Åô„ÅÆ„Åå„Éô„Çπ„Éà„ÄÇË™≠Êõ∏„ÇÑÁûëÊÉ≥„Åå„Åä„Åô„Åô„ÇÅ',
                    'Âõ∞Èõ£„ÇÇÊàêÈï∑„ÅÆ„ÉÅ„É£„É≥„Çπ„ÄÇÂâçÂêë„Åç„Å´Êçâ„Åà„Åæ„Åó„Çá„ÅÜ',
                    '‰ºëÊÅØ„Å®ÂÖÖÈõª„ÅÆÊôÇÈñì„ÇíÂ§ßÂàá„Å´„ÄÇÊòéÊó•„Å∏„ÅÆÊ¥ªÂäõ„ÇíËìÑ„Åà„Å¶„Åè„Å†„Åï„ÅÑ',
                    'ÂÜÖÁúÅ„ÅÆÊôÇ„ÄÇËá™ÂàÜËá™Ë∫´„Å®Âêë„ÅçÂêà„ÅÜ„Åì„Å®„ÅßÊñ∞„Åü„Å™Áô∫Ë¶ã„Åå„ÅÇ„Çä„Åæ„Åô',
                    '„Éû„Ç§„Éö„Éº„Çπ„ÅßÈÅé„Åî„Åô„Åì„Å®„Åå„ÄÅÂøÉ„ÅÆÂÆâÂÆö„Å´„Å§„Å™„Åå„Çä„Åæ„Åô'
                ]
            };
            return messages[score][Math.floor(Math.random() * messages[score].length)];
        }

        function calculateFortune(userBirth) {
            const today = new Date();
            const pillars = calculatePillar(userBirth.year, userBirth.month, userBirth.day);
            const todayPillars = calculatePillar(today.getFullYear(), today.getMonth() + 1, today.getDate());
            
            const compatibility = calculateElementCompatibility(pillars.day.element, todayPillars.day.element);
            const baseScore = 3 + compatibility;
            
            const loveScore = Math.max(1, Math.min(5, baseScore + (today.getDate() % 3) - 1));
            const workScore = Math.max(1, Math.min(5, baseScore + (today.getMonth() % 3) - 1));
            const healthScore = Math.max(1, Math.min(5, baseScore + (today.getDay() % 3) - 1));
            const moneyScore = Math.max(1, Math.min(5, baseScore + ((today.getDate() + today.getMonth()) % 3) - 1));

            const overallScore = Math.round((loveScore + workScore + healthScore + moneyScore) / 4);
            const todayHexagram = hexagrams[(today.getDate() + today.getMonth()) % hexagrams.length];
            const selectedAdvice = todayHexagram.advice[Math.floor(Math.random() * todayHexagram.advice.length)];

            return {
                overall: overallScore,
                love: loveScore,
                work: workScore,
                health: healthScore,
                money: moneyScore,
                loveMessage: getFortuneMessage('love', loveScore),
                workMessage: getFortuneMessage('work', workScore),
                healthMessage: getFortuneMessage('health', healthScore),
                moneyMessage: getFortuneMessage('money', moneyScore),
                element: pillars.day.element,
                elementDescription: getElementDescription(pillars.day.element),
                hexagram: {
                    name: todayHexagram.name,
                    meaning: todayHexagram.meaning,
                    advice: selectedAdvice
                },
                hexagramDetail: getHexagramDetail(todayHexagram),
                luckyColor: luckyColors[today.getDate() % luckyColors.length],
                luckyColorItem: getColorItems(luckyColors[today.getDate() % luckyColors.length]),
                luckyDirection: directions[today.getDay()],
                message: generateMessage(overallScore, pillars.day.element)
            };
        }

        function renderStars(score) {
            let stars = '';
            for (let i = 0; i < 5; i++) {
                if (i < score) {
                    stars += '<svg class="star star-filled" viewBox="0 0 24 24"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/></svg>';
                } else {
                    stars += '<svg class="star star-empty" viewBox="0 0 24 24"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/></svg>';
                }
            }
            return stars;
        }

        function parseBirthDate(dateString) {
            if (dateString.length !== 8) return null;
            const year = parseInt(dateString.substring(0, 4));
            const month = parseInt(dateString.substring(4, 6));
            const day = parseInt(dateString.substring(6, 8));
            
            if (year < 1900 || year > 2024 || month < 1 || month > 12 || day < 1 || day > 31) {
                return null;
            }
            
            return new Date(year, month - 1, day);
        }

        // „Ç§„Éô„É≥„Éà„Éè„É≥„Éâ„É©„Éº
        function handleInputChange(field, value) {
            currentState.formData[field] = value;
        }

        function handleSubmit() {
            // Analytics „Ç§„Éô„É≥„ÉàÈÄÅ‰ø°
            trackEvent('fortune_button_clicked', 'Fortune Generation');
            
            // DOMË¶ÅÁ¥†„Åã„ÇâÁõ¥Êé•ÂÄ§„ÇíÂèñÂæó
            const nameInput = document.getElementById('nameInput');
            const birthDateInput = document.getElementById('birthDateInput');
            const genderSelect = document.getElementById('genderSelect');
            
            const name = nameInput ? nameInput.value : '';
            const birthDate = birthDateInput ? birthDateInput.value : '';
            const gender = genderSelect ? genderSelect.value : '';
            
            if (!name || !birthDate || !gender) {
                trackEvent('validation_error', 'Form Validation');
                alert('„Åô„Åπ„Å¶„ÅÆÈ†ÖÁõÆ„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ');
                return;
            }

            const parsedDate = parseBirthDate(birthDate);
            if (!parsedDate) {
                trackEvent('birthdate_format_error', 'Form Validation');
                alert('ÁîüÂπ¥ÊúàÊó•„ÅØ20250101„ÅÆ„Çà„ÅÜ„Å™8Ê°Å„ÅÆÊï∞Â≠ó„ÅßÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ');
                return;
            }
            
            const userData = {
                name: name,
                year: parsedDate.getFullYear(),
                month: parsedDate.getMonth() + 1,
                day: parsedDate.getDate(),
                gender: gender
            };
            
            // Analytics: Âç†„ÅÑÁîüÊàêÊàêÂäü
            trackEvent('fortune_generated', 'Fortune Generation');
            
            currentState.user = userData;
            currentState.showAnimation = true;
            render();
            
            setTimeout(() => {
                currentState.fortune = calculateFortune(userData);
                currentState.showAnimation = false;
                trackEvent('fortune_displayed', 'Fortune Generation');
                render();
            }, 2000);
        }

        function resetApp() {
            trackEvent('reset_button_clicked', 'Navigation');
            currentState.user = null;
            currentState.fortune = null;
            currentState.showAnimation = false;
            currentState.formData = { name: '', birthDate: '', gender: '' };
            render();
        }

        // „Ç∑„Çß„Ç¢Ê©üËÉΩ
        function shareToTwitter() {
            trackEvent('twitter_share', 'Social Share');
            const text = `üîÆÂøÉ„ÅÆ„ÅäÂÆà„Çä„Åß‰ªäÊó•„ÅÆÈÅãÂã¢„ÇíÂç†„ÅÑ„Åæ„Åó„ÅüÔºÅ\nÁ∑èÂêàÈÅãÂã¢Ôºö${'‚òÖ'.repeat(currentState.fortune.overall)}${'‚òÜ'.repeat(5-currentState.fortune.overall)}\n‰ªäÊó•„ÅÆ„Ç®„É¨„É°„É≥„ÉàÔºö${currentState.fortune.element}\n\n#ÂøÉ„ÅÆ„ÅäÂÆà„Çä #‰ªäÊó•„ÅÆÈÅãÂã¢ #Âç†„ÅÑ`;
            const url = window.location.href;
            window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(url)}`, '_blank');
        }

        function shareToLine() {
            trackEvent('line_share', 'Social Share');
            const text = `üîÆÂøÉ„ÅÆ„ÅäÂÆà„Çä„Åß‰ªäÊó•„ÅÆÈÅãÂã¢„ÇíÂç†„ÅÑ„Åæ„Åó„ÅüÔºÅ\nÁ∑èÂêàÈÅãÂã¢Ôºö${'‚òÖ'.repeat(currentState.fortune.overall)}${'‚òÜ'.repeat(5-currentState.fortune.overall)}\n‰ªäÊó•„ÅÆ„Ç®„É¨„É°„É≥„ÉàÔºö${currentState.fortune.element}`;
            const url = window.location.href;
            window.open(`https://line.me/R/msg/text/?${encodeURIComponent(text + '\n' + url)}`, '_blank');
        }

        function copyUrl() {
            trackEvent('url_copy', 'Social Share');
            navigator.clipboard.writeText(window.location.href).then(() => {
                alert('URL„Çí„Ç≥„Éî„Éº„Åó„Åæ„Åó„ÅüÔºÅ');
            }).catch(() => {
                // „Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØ
                const textArea = document.createElement('textarea');
                textArea.value = window.location.href;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                alert('URL„Çí„Ç≥„Éî„Éº„Åó„Åæ„Åó„ÅüÔºÅ');
            });
        }

        // „É¨„É≥„ÉÄ„É™„É≥„Ç∞Èñ¢Êï∞
        function render() {
            const app = document.getElementById('app');
            
            if (currentState.showAnimation) {
                app.innerHTML = `
                    <div class="loading">
                        <svg class="loading-icon" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z" />
                        </svg>
                        <p class="text-white text-xl mb-4">ÈÅãÂã¢„ÇíÂç†„Å£„Å¶„ÅÑ„Åæ„Åô...</p>
                        <div class="loading-dots">
                            <div class="loading-dot"></div>
                            <div class="loading-dot"></div>
                            <div class="loading-dot"></div>
                        </div>
                    </div>
                `;
                return;
            }

            if (!currentState.user || !currentState.fortune) {
                app.innerHTML = `
                    <div class="form-container pt-8">
                        <div class="text-center mb-8">
                            <svg class="mx-auto mb-4" width="48" height="48" viewBox="0 0 24 24" fill="#facc15">
                                <path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z" />
                            </svg>
                            <h1 class="text-white">ÂøÉ„ÅÆ„ÅäÂÆà„Çä</h1>
                            <p class="text-blue-800">ÊØéÊó•„ÅÆÈÅãÂã¢„Åß‰ªäÊó•„ÇíÂπ∏„Åõ„Å´</p>
                        </div>

                        <div class="card">
                            <div class="input-group">
                                <label>„ÅäÂêçÂâç</label>
                                <input
                                    type="text"
                                    id="nameInput"
                                    value="${currentState.formData.name}"
                                    oninput="handleInputChange('name', this.value)"
                                    placeholder="„ÅäÂêçÂâç„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ"
                                />
                            </div>

                            <div class="input-group">
                                <label>ÁîüÂπ¥ÊúàÊó•Ôºà‰æãÔºö20250101Ôºâ</label>
                                <input
                                    type="text"
                                    id="birthDateInput"
                                    value="${currentState.formData.birthDate}"
                                    oninput="handleInputChange('birthDate', this.value)"
                                    maxlength="8"
                                    placeholder="20250101"
                                />
                            </div>

                            <div class="input-group">
                                <label>ÊÄßÂà•</label>
                                <select 
                                    id="genderSelect"
                                    onchange="handleInputChange('gender', this.value)" 
                                    style="color: ${currentState.formData.gender ? 'white' : '#4b5563'};"
                                >
                                    <option value="">ÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ</option>
                                    <option value="male" ${currentState.formData.gender === 'male' ? 'selected' : ''}>Áî∑ÊÄß</option>
                                    <option value="female" ${currentState.formData.gender === 'female' ? 'selected' : ''}>Â•≥ÊÄß</option>
                                    <option value="other" ${currentState.formData.gender === 'other' ? 'selected' : ''}>„Åù„ÅÆ‰ªñ</option>
                                </select>
                            </div>

                            <button onclick="handleSubmit()" class="btn">
                                ‰ªäÊó•„ÅÆÈÅãÂã¢„ÇíË¶ã„Çã
                            </button>
                        </div>

                        <div class="footer">
                            <p>‚ÄªÂ®ØÊ•Ω„ÇíÁõÆÁöÑ„Å®„Åó„ÅüÂç†„ÅÑ„Ç¢„Éó„É™„Åß„Åô„ÄÇÁµêÊûú„ÅØÂèÇËÄÉÁ®ãÂ∫¶„Å´„ÅäÊ•Ω„Åó„Åø„Åè„Å†„Åï„ÅÑ„ÄÇ</p>
                        </div>
                    </div>
                `;
                return;
            }

            // ÁµêÊûúË°®Á§∫
            const { user, fortune } = currentState;
            const today = new Date().toLocaleDateString('ja-JP');
            
            app.innerHTML = `
                <div class="container">
                    <div class="text-center mb-8 pt-4">
                        <h1 class="text-white">${user.name}„Åï„Çì„ÅÆ‰ªäÊó•„ÅÆÈÅãÂã¢</h1>
                        <p class="text-blue-800">${today}</p>
                    </div>

                    <div class="card">
                        <div class="text-center">
                            <h2 class="text-white">Á∑èÂêàÈÅãÂã¢</h2>
                            <div class="stars">${renderStars(fortune.overall)}</div>
                            <p class="text-lg text-blue-800 mb-4">${fortune.message}</p>
                            <div class="element-badge ${elementColors[fortune.element]}">
                                ‰ªäÊó•„ÅÆ„Ç®„É¨„É°„É≥„Éà: ${fortune.element}
                            </div>
                            <p class="text-sm text-blue-700 max-w-md mx-auto">${fortune.elementDescription}</p>
                        </div>
                    </div>

                    <div class="grid grid-2 mb-6">
                        <div class="card">
                            <div class="flex items-center mb-4">
                                <svg class="mr-2" width="24" height="24" viewBox="0 0 24 24" fill="#f472b6">
                                    <path d="M12,21.35L10.55,20.03C5.4,15.36 2,12.27 2,8.5 2,5.41 4.42,3 7.5,3C9.24,3 10.91,3.81 12,5.08C13.09,3.81 14.76,3 16.5,3C19.58,3 22,5.41 22,8.5C22,12.27 18.6,15.36 13.45,20.03L12,21.35Z"/>
                                </svg>
                                <h3 class="text-white">ÊÅãÊÑõÈÅã</h3>
                            </div>
                            <div class="stars">${renderStars(fortune.love)}</div>
                            <p class="text-blue-800 text-sm leading-relaxed">${fortune.loveMessage}</p>
                        </div>

                        <div class="card">
                            <div class="flex items-center mb-4">
                                <svg class="mr-2" width="24" height="24" viewBox="0 0 24 24" fill="#60a5fa">
                                    <path d="M10,2H14A2,2 0 0,1 16,4V6H20A2,2 0 0,1 22,8V19A2,2 0 0,1 20,21H4C2.89,21 2,20.1 2,19V8C2,6.89 2.89,6 4,6H8V4C8,2.89 8.89,2 10,2M14,6V4H10V6H14Z"/>
                                </svg>
                                <h3 class="text-white">‰ªï‰∫ãÈÅã</h3>
                            </div>
                            <div class="stars">${renderStars(fortune.work)}</div>
                            <p class="text-blue-800 text-sm leading-relaxed">${fortune.workMessage}</p>
                        </div>

                        <div class="card">
                            <div class="flex items-center mb-4">
                                <svg class="mr-2" width="24" height="24" viewBox="0 0 24 24" fill="#4ade80">
                                    <path d="M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1M12,7C13.4,7 14.8,8.6 14.8,10V11.5H16.3V16H7.7V11.5H9.2V10C9.2,8.6 10.6,7 12,7M12,8.2C11.2,8.2 10.5,8.7 10.5,9.5V11.5H13.5V9.5C13.5,8.7 12.8,8.2 12,8.2Z"/>
                                </svg>
                                <h3 class="text-white">ÂÅ•Â∫∑ÈÅã</h3>
                            </div>
                            <div class="stars">${renderStars(fortune.health)}</div>
                            <p class="text-blue-800 text-sm leading-relaxed">${fortune.healthMessage}</p>
                        </div>

                        <div class="card">
                            <div class="flex items-center mb-4">
                                <svg class="mr-2" width="24" height="24" viewBox="0 0 24 24" fill="#facc15">
                                    <path d="M6,2A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2H6Z M13,3.5L18.5,9H13V3.5Z"/>
                                </svg>
                                <h3 class="text-white">ÈáëÈÅã</h3>
                            </div>
                            <div class="stars">${renderStars(fortune.money)}</div>
                            <p class="text-blue-800 text-sm leading-relaxed">${fortune.moneyMessage}</p>
                        </div>
                    </div>

                    <div class="card">
                        <h2 class="text-white text-center">‰ªäÊó•„ÅÆ„ÅäÂÆà„Çä</h2>
                        <div class="grid grid-3">
                            <div class="text-center lucky-item">
                                <div class="lucky-icon lucky-icon-yellow">
                                    <svg class="icon-white" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/>
                                    </svg>
                                </div>
                                <h3 class="text-white">„É©„ÉÉ„Ç≠„Éº„Ç´„É©„Éº</h3>
                                <p class="text-blue-800">${fortune.luckyColor}</p>
                                <p class="text-blue-700 text-sm">‰ªäÊó•„ÅØ${fortune.luckyColorItem}„Çí</p>
                            </div>

                            <div class="text-center lucky-item">
                                <div class="lucky-icon lucky-icon-blue">
                                    <svg class="icon-white" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M14.19,14.19L6,18L9.81,9.81L18,6M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4Z"/>
                                    </svg>
                                </div>
                                <h3 class="text-white">„É©„ÉÉ„Ç≠„ÉºÊñπËßí</h3>
                                <p class="text-blue-800">${fortune.luckyDirection}</p>
                            </div>

                            <div class="text-center lucky-item">
                                <div class="lucky-icon lucky-icon-purple">
                                    <svg class="icon-white" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"/>
                                    </svg>
                                </div>
                                <h3 class="text-white">‰ªäÊó•„ÅÆÂç¶</h3>
                                <p class="text-blue-800">${fortune.hexagram.name} (${fortune.hexagram.meaning})</p>
                                <p class="text-blue-700 text-sm">${fortune.hexagramDetail}</p>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <h2 class="text-white text-center">ÈñãÈÅã„Ç¢„Éâ„Éê„Ç§„Çπ</h2>
                        <p class="text-blue-800 text-center leading-relaxed">${fortune.hexagram.advice}</p>
                    </div>

                    <div class="text-center share-container">
                        <h3 class="text-white mb-4">ÁµêÊûú„Çí„Ç∑„Çß„Ç¢</h3>
                        <div class="flex justify-center flex-wrap">
                            <button onclick="shareToTwitter()" class="btn-share">
                                üê¶ Twitter
                            </button>
                            <button onclick="shareToLine()" class="btn-share">
                                üí¨ LINE
                            </button>
                            <button onclick="copyUrl()" class="btn-share">
                                üîó URL„Ç≥„Éî„Éº
                            </button>
                        </div>
                    </div>

                    <div class="text-center">
                        <button onclick="resetApp()" class="btn-reset">
                            Êñ∞„Åó„ÅèÂç†„ÅÜ
                        </button>
                    </div>

                    <div class="footer">
                        <p>‚ÄªÊú¨„Ç¢„Éó„É™„ÅØÂ®ØÊ•Ω„ÇíÁõÆÁöÑ„Å®„Åó„ÅüÂç†„ÅÑ„Ç¢„Éó„É™„Åß„Åô„ÄÇÁµêÊûú„ÅØÂèÇËÄÉÁ®ãÂ∫¶„Å´„ÅäÊ•Ω„Åó„Åø„Åè„Å†„Åï„ÅÑ„ÄÇ</p>
                        <p>‰∫∫Áîü„ÅÆÈáçË¶Å„Å™Ê±∫Êñ≠„ÅØ„ÄÅ„ÅîËá™Ë∫´„ÅÆÂà§Êñ≠„Åß„ÅäÊ±∫„ÇÅ„ÅÑ„Åü„Å†„Åç„Åæ„Åô„Çà„ÅÜ„ÅäÈ°ò„ÅÑ„ÅÑ„Åü„Åó„Åæ„Åô„ÄÇ</p>
                    </div>
                </div>
            `;
        }

        // „Éö„Éº„Ç∏Ë™≠„ÅøËæº„ÅøÊôÇ„ÅÆAnalytics„Ç§„Éô„É≥„Éà
        document.addEventListener('DOMContentLoaded', function() {
            trackEvent('page_loaded', 'App Usage');
        });

        // ÂàùÊúüË°®Á§∫
        render();
    </script>
</body>
</html>
